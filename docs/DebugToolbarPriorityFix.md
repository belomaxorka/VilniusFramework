# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ Debug Toolbar

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–ª–∞ **–∫–æ–Ω—Ç—Ä-–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**:
- –ú–µ–Ω—å—à–µ–µ —á–∏—Å–ª–æ (10) = –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú
- –ë–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ (100) = –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ü–û–°–õ–ï–î–ù–ò–ú

–≠—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –≤–æ—Å–ø—Ä–∏—è—Ç–∏—é, –≥–¥–µ:
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** –¥–æ–ª–∂–µ–Ω –æ–∑–Ω–∞—á–∞—Ç—å "–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–π"
- **–ë–æ–ª–µ–µ –≤–∞–∂–Ω—ã–π** –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–µ—Ä–≤—ã–º (–ª–µ–≤–µ–µ)

## –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞ **–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é**:
- **–ë–æ–ª—å—à–µ —á–∏—Å–ª–æ = –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (–ª–µ–≤–µ–µ)**
- –ú–µ–Ω—å—à–µ —á–∏—Å–ª–æ = –Ω–∏–∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ (–ø—Ä–∞–≤–µ–µ)

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (DebugToolbar.php)

**–ë—ã–ª–æ:**
```php
uasort($collectors, fn($a, $b) => $a->getPriority() <=> $b->getPriority());
// 10 < 50 < 100 ‚Üí 10 –ø–µ—Ä–≤—ã–π
```

**–°—Ç–∞–ª–æ:**
```php
uasort($collectors, fn($a, $b) => $b->getPriority() <=> $a->getPriority());
// 100 > 50 > 10 ‚Üí 100 –ø–µ—Ä–≤—ã–π
```

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–≤

| –ö–æ–ª–ª–µ–∫—Ç–æ—Ä         | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ü–æ–∑–∏—Ü–∏—è       |
|-------------------|------|-------|---------------|
| OverviewCollector | 10   | 100   | 1-–π (–ø–µ—Ä–≤—ã–π)  |
| DumpsCollector    | 20   | 90    | 2-–π           |
| QueriesCollector  | 30   | 80    | 3-–π           |
| CacheCollector    | 35   | 75    | 4-–π           |
| TimersCollector   | 40   | 70    | 5-–π           |
| MemoryCollector   | 50   | 60    | 6-–π           |
| ContextsCollector | 60   | 50    | 7-–π (–ø–æ—Å–ª–µ–¥–Ω–∏–π)|

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `core/DebugToolbar/README.md`
- `docs/DebugToolbarCollectors.md`
- `docs/DebugToolbarUpgrade.md`
- `docs/examples/CustomCollectorExample.php`

### 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã

- `tests/Unit/Core/DebugToolbarPriorityTest.php`

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º)

```php
class ImportantCollector extends AbstractCollector
{
    public function __construct()
    {
        $this->priority = 95; // –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –º–µ–∂–¥—É Dumps (90) –∏ Overview (100)
    }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º)

```php
class LessImportantCollector extends AbstractCollector
{
    public function __construct()
    {
        $this->priority = 30; // –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø–æ—Å–ª–µ Contexts (50)
    }
}
```

## –ü—Ä–∞–≤–∏–ª–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**üìä –ß–µ–º –ë–û–õ–¨–®–ï —á–∏—Å–ª–æ, —Ç–µ–º –í–ê–ñ–ù–ï–ï –∫–æ–ª–ª–µ–∫—Ç–æ—Ä, —Ç–µ–º –†–ê–ù–¨–®–ï (–õ–ï–í–ï–ï) –æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**

- 100 = —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π, –ø–µ—Ä–≤—ã–π —Å–ª–µ–≤–∞
- 50 = —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ  
- 10 = –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ø—Ä–∞–≤–∞

## –ü—Ä–∏–º–µ—Ä—ã –ø–æ—Ä—è–¥–∫–∞

### –ü—Ä–∏–º–µ—Ä 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã

```
100 (Overview) | 90 (Dumps) | 80 (Queries) | 75 (Cache) | 70 (Timers) | 60 (Memory) | 50 (Contexts)
   ‚Üê –ø–µ—Ä–≤—ã–π                                                                              –ø–æ—Å–ª–µ–¥–Ω–∏–π ‚Üí
```

### –ü—Ä–∏–º–µ—Ä 2: –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º

```php
// –í–∞—à –∫–æ–ª–ª–µ–∫—Ç–æ—Ä —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º 85
class MyCollector { 
    priority = 85; 
}

// –ü–æ—Ä—è–¥–æ–∫:
100 (Overview) | 90 (Dumps) | 85 (My) | 80 (Queries) | ...
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ breaking change –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–∂–µ —Å–æ–∑–¥–∞–ª —Å–≤–æ–∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã!

–ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã —Å —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤, –≤–∞–º –Ω—É–∂–Ω–æ **–∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å** –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è:

```php
// –ë—ã–ª–æ (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 15 = –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–∞–Ω–æ
class MyCollector {
    priority = 15;
}

// –°—Ç–∞–ª–æ (–Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞): –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ 85
class MyCollector {
    priority = 85; // (100 - 15 = 85) –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
}
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```bash
vendor/bin/pest tests/Unit/Core/DebugToolbarPriorityTest.php
```

–í—Å–µ 3 —Ç–µ—Å—Ç–∞ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ:
- ‚úÖ collectors are sorted by priority (higher = earlier)
- ‚úÖ header stats are sorted by priority (higher = earlier)  
- ‚úÖ priority can be changed dynamically

## –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

30 —Å–µ–Ω—Ç—è–±—Ä—è 2025
