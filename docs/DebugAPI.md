# Core\Debug - API Reference

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –∫–ª–∞—Å—Å–∞ Debug.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –ü—Ä–æ—Å—Ç–æ–π –¥–∞–º–ø

#### `Debug::dump($var, $label = null)`
–í—ã–≤–µ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```php
use Core\Debug;

$user = ['name' => 'John', 'age' => 30];
Debug::dump($user, 'User Data');
```

#### `Debug::dd($var, $label = null): never`
–í—ã–≤–µ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (dump and die).

```php
Debug::dd($user, 'User Data'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

---

### –ö—Ä–∞—Å–∏–≤—ã–π –¥–∞–º–ø

#### `Debug::dumpPretty($var, $label = null)`
–í—ã–≤–µ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞).

```php
$complex = [
    'user' => [
        'name' => 'John',
        'settings' => [
            'theme' => 'dark',
            'notifications' => true
        ]
    ]
];

Debug::dumpPretty($complex, 'User Settings');
```

#### `Debug::ddPretty($var, $label = null): never`
–ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```php
Debug::ddPretty($complex, 'Complex Data'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

---

### Stack Trace

#### `Debug::trace($label = null)`
–í—ã–≤–µ—Å—Ç–∏ backtrace (—Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤) —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

```php
function deepFunction() {
    Debug::trace('Deep in the call stack');
}

function middleFunction() {
    deepFunction();
}

middleFunction();
```

**–í—ã–≤–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç:**
- –ù–æ–º–µ—Ä –≤ —Å—Ç–µ–∫–µ (#0, #1, #2...)
- –ö–ª–∞—Å—Å –∏ –º–µ—Ç–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏
- –§–∞–π–ª –∏ —Å—Ç—Ä–æ–∫—É
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –≤ —Å—Ç–∏–ª–µ VSCode
- –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç—Ä–µ–π—Å–æ–≤

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `Logger::debug()`
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## üì¶ –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

### `Debug::collect($var, $label = null)`
–°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞.

```php
Debug::collect($userData, 'User Info');
Debug::collect($configData, 'Config');
Debug::collect($requestData, 'Request');

// –ü–æ–∑–∂–µ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
Debug::dumpAll();
```

### `Debug::dumpAll($die = false)`
–í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

```php
Debug::collect($data1, 'Data 1');
Debug::collect($data2, 'Data 2');
Debug::dumpAll(); // –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
Debug::dumpAll(true); // –ü–æ–∫–∞–∂–µ—Ç –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

### `Debug::clear()`
–û—á–∏—Å—Ç–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

```php
Debug::collect($data);
Debug::clear(); // –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

---

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–º

### `Debug::getOutput($raw = false)`
–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π debug –≤—ã–≤–æ–¥.

```php
Debug::dump($data);
$output = Debug::getOutput(); // –°—Ç—Ä–æ–∫–∞ —Å HTML
$raw = Debug::getOutput(true); // –ú–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```

### `Debug::hasOutput()`
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ debug –≤—ã–≤–æ–¥–∞ –≤ –±—É—Ñ–µ—Ä–µ.

```php
if (Debug::hasOutput()) {
    echo Debug::getOutput();
}
```

### `Debug::flush()`
–í—ã–≤–µ—Å—Ç–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ debug –¥–∞–Ω–Ω—ã–µ –∏ –æ—á–∏—Å—Ç–∏—Ç—å –±—É—Ñ–µ—Ä.

```php
Debug::dump($data1);
Debug::dump($data2);
Debug::flush(); // –í—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∏ –æ—á–∏—â–∞–µ—Ç
```

### `Debug::clearOutput()`
–û—á–∏—Å—Ç–∏—Ç—å –±—É—Ñ–µ—Ä –≤—ã–≤–æ–¥–∞ –±–µ–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

```php
Debug::dump($data);
Debug::clearOutput(); // –£–¥–∞–ª–∏—Ç—å –∏–∑ –±—É—Ñ–µ—Ä–∞ –±–µ–∑ –≤—ã–≤–æ–¥–∞
```

### `Debug::addOutput($html)`
–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π HTML –≤ –±—É—Ñ–µ—Ä –≤—ã–≤–æ–¥–∞.

```php
Debug::addOutput('<div style="color: red;">Custom debug message</div>');
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### `Debug::setAutoDisplay($auto)`
–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Ü–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```php
Debug::setAutoDisplay(true);  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
Debug::setAutoDisplay(false); // –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-–≤—ã–≤–æ–¥
```

### `Debug::isAutoDisplay()`
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–≤–æ–¥–∞.

```php
if (Debug::isAutoDisplay()) {
    // –ê–≤—Ç–æ-–≤—ã–≤–æ–¥ –≤–∫–ª—é—á–µ–Ω
}
```

### `Debug::setRenderOnPage($enabled)`
–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `false` - –≤—ã–≤–æ–¥ —Ç–æ–ª—å–∫–æ –≤ Debug Toolbar.

```php
Debug::setRenderOnPage(true);  // –í—ã–≤–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ò –≤ toolbar
Debug::setRenderOnPage(false); // –¢–æ–ª—å–∫–æ –≤ toolbar (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### `Debug::isRenderOnPage()`
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∫–ª—é—á–µ–Ω –ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

```php
if (Debug::isRenderOnPage()) {
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∫–ª—é—á–µ–Ω
}
```

### `Debug::setMaxDepth($depth)`
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–ª—É–±–∏–Ω—É —Ä–µ–∫—É—Ä—Å–∏–∏ –¥–ª—è dump.

```php
Debug::setMaxDepth(10); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
Debug::setMaxDepth(20); // –î–ª—è –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
```

### `Debug::setShowBacktrace($show)`
–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ–∫–∞–∑ backtrace –≤ dump.

```php
Debug::setShowBacktrace(true);  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
Debug::setShowBacktrace(false); // –°–∫—Ä—ã—Ç—å backtrace
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–∞—è –æ—Ç–ª–∞–¥–∫–∞

```php
use Core\Debug;

// –ü—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥
$user = User::find(1);
Debug::dump($user, 'Current User');

// –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
Debug::dd($user, 'Stop here!');
```

### –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥

```php
$config = [
    'database' => [
        'host' => 'localhost',
        'port' => 3306,
        'connections' => [
            'mysql' => [...],
            'sqlite' => [...]
        ]
    ]
];

Debug::dumpPretty($config, 'App Configuration');
```

### Stack trace

```php
class UserController {
    public function show($id) {
        $user = $this->findUser($id);
        
        if (!$user) {
            Debug::trace('User not found');
            return $this->error('Not found');
        }
        
        return $this->view('user.show', compact('user'));
    }
}
```

### –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

```php
// –í —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∫–æ–¥–∞
Debug::collect($request->all(), 'Request Data');
Debug::collect($config->get('app'), 'App Config');
Debug::collect($session->all(), 'Session Data');

// –í –∫–æ–Ω—Ü–µ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ
Debug::dumpAll();
```

### –£—Å–ª–æ–≤–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

```php
use Core\Environment;

if (Environment::isDebug()) {
    Debug::dump($queryResult, 'Query Result');
    Debug::trace('Query execution path');
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (APP_ENV=development)
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –∞–∫—Ç–∏–≤–Ω—ã
- ‚úÖ –í—ã–≤–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –≤ toolbar
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –í —Ä–µ–∂–∏–º–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (APP_ENV=production)
- ‚ùå –í—ã–≤–æ–¥ –æ—Ç–∫–ª—é—á–µ–Ω
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

```php
// –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ dump() –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –Ω–∏—á–µ–≥–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
// –Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç –≤ —Ñ–∞–π–ª storage/logs/debug.log
Debug::dump($sensitiveData); // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤ prod
```

---

## üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Dump
- –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ë—ã—Å—Ç—Ä—ã–π

### DumpPretty
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (—Å—Ç–∏–ª—å VSCode)
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
- –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

### Trace
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –≤ —Å—Ç–∏–ª–µ VSCode
- –ù–æ–º–µ—Ä–∞ —Å—Ç–µ–∫–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –§–∞–π–ª—ã –∏ —Å—Ç—Ä–æ–∫–∏
- –ö–ª–∞—Å—Å—ã –∏ –º–µ—Ç–æ–¥—ã —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
- –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### DO ‚úÖ
```php
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–∫–∏ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
Debug::dump($data, 'User Data');

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ trace –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è flow
Debug::trace('After authentication');

// –°–æ–±–∏—Ä–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
Debug::collect($state, 'State before change');
```

### DON'T ‚ùå
```php
// –ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ dd() –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–æ–¥–µ
Debug::dd($data); // ‚ùå –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

// –ù–µ –¥–∞–º–ø–∏—Ç–µ –æ–≥—Ä–æ–º–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
Debug::dump($hugeObject); // ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ

// –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Ü–∏–∫–ª–∞—Ö —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏—Ç–µ—Ä–∞—Ü–∏–π
foreach ($items as $item) {
    Debug::dump($item); // ‚ùå –ú–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
}
```

---

## üìñ –°–º. —Ç–∞–∫–∂–µ

- [Debug Quick Start](DebugQuickStart.md)
- [Debug Contexts](DebugContexts.md)
- [Debug Toolbar](DebugToolbar.md)
- [Deprecated Helpers](DeprecatedHelpers.md)

---

**–í—Å–µ debug –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üîí**

