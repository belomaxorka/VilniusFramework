# ErrorRenderer - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫

## –û–±–∑–æ—Ä

`ErrorRenderer` - –∫–ª–∞—Å—Å –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Debug Toolbar.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üé® **–ü—Ä–æ—Å—Ç–æ–π –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Å–µ—Ä—ã–π —Ñ–æ–Ω, —Ç–µ–∫—Å—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É
- üêõ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Debug Toolbar** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –æ—à–∏–±–æ–∫ –≤ debug —Ä–µ–∂–∏–º–µ
- üì± **JSON –∏ HTML –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
- üéØ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫
- üîß **–î–µ—Ç–∞–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ debug —Ä–µ–∂–∏–º–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
use Core\ErrorRenderer;

// –ü—Ä–æ—Å—Ç–∞—è –æ—à–∏–±–∫–∞
echo ErrorRenderer::render(404, 'Not Found');

// –û—à–∏–±–∫–∞ 500
echo ErrorRenderer::render(500, 'Internal Server Error');
```

### –í Router

```php
// 404 –æ—à–∏–±–∫–∞
protected function renderDefaultNotFound(string $method, string $uri): void
{
    echo ErrorRenderer::render(404, 'Not Found');
}
```

### –í ErrorHandler

```php
// –û—à–∏–±–∫–∞ 500
echo ErrorRenderer::render(500, 'Internal Server Error');
```

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `resources/views/errors/{code}.tpl`:

```php
// resources/views/errors/404.tpl
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Not Found</title>
    <style>
        body {
            background: #9e9e9e;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .error-code {
            font-size: 120px;
            color: #212121;
        }
    </style>
</head>
<body>
    <div>
        <div class="error-code">404</div>
        <div>404 | Not Found</div>
    </div>
</body>
</html>
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–¥—ã

–°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ª—é–±—ã—Ö HTTP –∫–æ–¥–æ–≤:
- `400.tpl` - Bad Request
- `401.tpl` - Unauthorized
- `403.tpl` - Forbidden
- `404.tpl` - Not Found
- `422.tpl` - Unprocessable Entity
- `500.tpl` - Internal Server Error
- –∏ —Ç.–¥.

## Debug Toolbar

Debug Toolbar **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫ –≤ debug —Ä–µ–∂–∏–º–µ.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –í–∏–¥–Ω–æ –≤—Å–µ debug –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—à–∏–±–∫–∏
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã, –ª–æ–≥–∏, –ø–∞–º—è—Ç—å
- ‚úÖ –ü–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏

### –ü—Ä–∏–º–µ—Ä

–í debug —Ä–µ–∂–∏–º–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 404 –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         404                 ‚îÇ
‚îÇ    404 | Not Found           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üêõ Debug Toolbar            ‚îÇ
‚îÇ ‚è±Ô∏è 45ms  üíæ 2.1MB  üóÑÔ∏è 3     ‚îÇ
‚îÇ ‚îú‚îÄ Request                  ‚îÇ
‚îÇ ‚îú‚îÄ Response                 ‚îÇ
‚îÇ ‚îî‚îÄ ...                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## JSON –û—Ç–≤–µ—Ç—ã

–î–ª—è JSON –∑–∞–ø—Ä–æ—Å–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON:

```php
// –ó–∞–ø—Ä–æ—Å: Accept: application/json
ErrorRenderer::render(404, 'Not Found');

// –û—Ç–≤–µ—Ç:
{
    "error": "Not Found",
    "message": "Not Found",
    "code": 404,
    "path": "/api/users"
}
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ JSON –∑–∞–ø—Ä–æ—Å–∞

ErrorRenderer –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç JSON –∑–∞–ø—Ä–æ—Å –ø–æ:
1. `Content-Type: application/json`
2. `Accept: application/json`
3. AJAX –∑–∞–ø—Ä–æ—Å + JSON –≤ Accept

## –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω:

- **–§–æ–Ω**: —Å–µ—Ä—ã–π (#9e9e9e)
- **–ö–æ–¥ –æ—à–∏–±–∫–∏**: –±–æ–ª—å—à–æ–π, —á–µ—Ä–Ω—ã–π (120px)
- **–§–æ—Ä–º–∞—Ç**: `{–∫–æ–¥} | {—Å–æ–æ–±—â–µ–Ω–∏–µ}`
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞

### –ü—Ä–∏–º–µ—Ä

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                             ‚îÇ
‚îÇ          404                ‚îÇ
‚îÇ     404 | Not Found          ‚îÇ
‚îÇ                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü—Ä–æ—Å—Ç–æ–π –¥–∏–∑–∞–π–Ω

–°—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫ –∏–º–µ—é—Ç –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω:

```php
ErrorRenderer::render(404, 'Not Found');
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          404                ‚îÇ
‚îÇ     404 | Not Found          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## API

### `render(int $code, string $message): string`

–†–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `$code` - HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ (404, 500, –∏ —Ç.–¥.)
- `$message` - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** HTML –∏–ª–∏ JSON —Å—Ç—Ä–æ–∫—É

**–ü—Ä–∏–º–µ—Ä—ã:**

```php
// –ü—Ä–æ—Å—Ç–∞—è –æ—à–∏–±–∫–∞
ErrorRenderer::render(404, 'Not Found');

// –û—à–∏–±–∫–∞ 500
ErrorRenderer::render(500, 'Database Error');

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ—à–∏–±–∫–∞
ErrorRenderer::render(418, "I'm a teapot");
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –í —Ä–æ—É—Ç–∞—Ö

```php
// routes/web.php
$router->get('admin', function() {
    echo ErrorRenderer::render(403, 'Access Denied');
});
```

### –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö

```php
// app/Controllers/UserController.php
public function show(int $id)
{
    $user = User::find($id);
    
    if (!$user) {
        echo ErrorRenderer::render(404, 'User Not Found');
        return;
    }
    
    return view('user.show', compact('user'));
}
```

### –í middleware

```php
// core/Middleware/AdminMiddleware.php
public function handle(callable $next): mixed
{
    if (!isAdmin()) {
        echo ErrorRenderer::render(403, 'Admin Access Required');
        exit;
    }
    
    return $next();
}
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–¥—ã

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----|----------|---------------|
| 400 | Bad Request | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 401 | Unauthorized | –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| 403 | Forbidden | –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω |
| 404 | Not Found | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 405 | Method Not Allowed | –ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| 422 | Unprocessable Entity | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| 429 | Too Many Requests | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ |
| 500 | Internal Server Error | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
| 502 | Bad Gateway | –û—à–∏–±–∫–∞ —à–ª—é–∑–∞ |
| 503 | Service Unavailable | –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–¥—ã

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π HTTP –∫–æ–¥:

```php
ErrorRenderer::render(418, "I'm a teapot");
ErrorRenderer::render(451, 'Unavailable For Legal Reasons');
```

## FAQ

**Q: –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å Debug Toolbar –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—à–∏–±–∫–∏?**

A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ production —Ä–µ–∂–∏–º:
```php
// .env
APP_ENV=production
```

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç —Ñ–æ–Ω–∞?**

A: –î–∞, —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à–∞–±–ª–æ–Ω –≤ `resources/views/errors/{code}.tpl`

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞ –≥–ª–∞–≤–Ω—É—é"?**

A: –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à–∞–±–ª–æ–Ω:
```html
<a href="/" class="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
```

**Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å API endpoints?**

A: –î–∞! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤.

## –°–º. —Ç–∞–∫–∂–µ

- [Router.md](Router.md) - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- [ErrorHandler.md](ErrorHandler.md) - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [DebugToolbar.md](DebugToolbar.md) - Debug –ø–∞–Ω–µ–ª—å

