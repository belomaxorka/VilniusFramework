# –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ú–æ—â–Ω–∞—è –∏ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –∏ –∫–∞–Ω–∞–ª–æ–≤.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–î—Ä–∞–π–≤–µ—Ä—ã](#–¥—Ä–∞–π–≤–µ—Ä—ã)
- [–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](#—É—Ä–æ–≤–Ω–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ](#–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ-–¥–∞–Ω–Ω—ã–µ)
- [–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã](#–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ-–∫–∞–Ω–∞–ª—ã)
- [–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ-–¥—Ä–∞–π–≤–µ—Ä–∞)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—Ñ–∞–π–ª—ã, Slack, Telegram –∏ —Ç.–¥.). –û–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- üìÅ **–§–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–ø–∏—Å—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- üí¨ **Slack** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ Slack –∫–∞–Ω–∞–ª—ã
- üì± **Telegram** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ Telegram —á–∞—Ç—ã
- üîå **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã
- üéØ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞
- üìä **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –ø–µ—Ä–µ–¥–∞—á–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∏

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
use Core\Logger;

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
Logger::debug('Debug information');
Logger::info('User logged in');
Logger::warning('Low disk space');
Logger::error('Database connection failed');
Logger::critical('System is down!');
```

### –° –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```php
Logger::info('User {username} logged in from {ip}', [
    'username' => 'john_doe',
    'ip' => '192.168.1.1'
]);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: User john_doe logged in from 192.168.1.1
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config/logging.php`:

```php
return [
    // –î—Ä–∞–π–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    'default' => env('LOG_CHANNEL', 'file'),
    
    // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    'min_level' => env('LOG_LEVEL', 'debug'),
    
    // –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ: 'file,slack,telegram')
    'channels' => env('LOG_CHANNELS', 'file'),
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤
    'drivers' => [
        'file' => [
            'driver' => 'file',
            'path' => env('LOG_FILE', LOG_DIR . '/app.log'),
            'min_level' => 'debug',
        ],
        
        'slack' => [
            'driver' => 'slack',
            'webhook_url' => env('LOG_SLACK_WEBHOOK_URL', ''),
            'channel' => '#logs',
            'username' => 'Logger Bot',
            'emoji' => ':robot_face:',
            'min_level' => 'error',
        ],
        
        'telegram' => [
            'driver' => 'telegram',
            'bot_token' => env('LOG_TELEGRAM_BOT_TOKEN', ''),
            'chat_id' => env('LOG_TELEGRAM_CHAT_ID', ''),
            'min_level' => 'error',
            'parse_mode' => 'HTML',
        ],
    ],
];
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
LOG_CHANNEL=file
LOG_LEVEL=debug
LOG_CHANNELS=file

# –§–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_FILE=storage/logs/app.log

# Slack (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LOG_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
LOG_SLACK_CHANNEL=#logs
LOG_SLACK_LEVEL=error

# Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LOG_TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
LOG_TELEGRAM_CHAT_ID=123456789
LOG_TELEGRAM_LEVEL=error
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã

```php
// Debug - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
Logger::debug('Variable value: ' . $value);

// Info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
Logger::info('User registered successfully');

// Warning - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
Logger::warning('Cache miss for key: ' . $key);

// Error - –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
Logger::error('Failed to connect to database');

// Critical - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
Logger::critical('Application crashed!');
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è

```php
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
Logger::setMinLevel('error');

// –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ error –∏ critical
Logger::debug('Not logged'); // –ù–µ –±—É–¥–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ
Logger::error('Logged!');     // –ë—É–¥–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ
```

---

## –î—Ä–∞–π–≤–µ—Ä—ã

### File Driver (–§–∞–π–ª—ã)

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ.

**–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏:**
```
[2025-09-30 14:23:45] [INFO] User logged in
[2025-09-30 14:23:46] [ERROR] Database connection failed
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```php
'file' => [
    'driver' => 'file',
    'path' => '/path/to/logs/app.log',
    'min_level' => 'debug',
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç timestamp –∏ —É—Ä–æ–≤–µ–Ω—å

---

### Slack Driver

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ Slack —á–µ—Ä–µ–∑ Incoming Webhooks.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –°–æ–∑–¥–∞–π—Ç–µ Incoming Webhook –≤ Slack:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://api.slack.com/messaging/webhooks
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Webhook –¥–ª—è –≤–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL

2. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```php
'slack' => [
    'driver' => 'slack',
    'webhook_url' => 'https://hooks.slack.com/services/YOUR/WEBHOOK/URL',
    'channel' => '#logs',
    'username' => 'Logger Bot',
    'emoji' => ':robot_face:',
    'min_level' => 'error', // –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –≤ Slack
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üé® –¶–≤–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –æ—à–∏–±–æ–∫, –∂–µ–ª—Ç—ã–π –¥–ª—è warning –∏ —Ç.–¥.)
- üòÄ –≠–º–æ–¥–∑–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —É—Ä–æ–≤–Ω–µ–π
- üìä Structured attachments
- ‚è±Ô∏è Timestamp –≤–∫–ª—é—á–µ–Ω
- üåê –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ (hostname –∏–ª–∏ CLI)

**–¶–≤–µ—Ç–∞ —É—Ä–æ–≤–Ω–µ–π:**
- `debug` - –°–µ—Ä—ã–π (#6c757d)
- `info` - –ì–æ–ª—É–±–æ–π (#17a2b8)
- `warning` - –ñ–µ–ª—Ç—ã–π (#ffc107)
- `error` - –ö—Ä–∞—Å–Ω—ã–π (#dc3545)
- `critical` - –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π (#721c24)

---

### Telegram Driver

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ Telegram —á–µ—Ä–µ–∑ Bot API.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather:
   - –ù–∞–ø–∏—à–∏—Ç–µ `/newbot` –≤ @BotFather
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –ü–æ–ª—É—á–∏—Ç–µ Bot Token

2. –ü–æ–ª—É—á–∏—Ç–µ Chat ID:
   - –ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –≤–∞—à–µ–º—É –±–æ—Ç—É
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @userinfobot / @getmyid_bot

3. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```php
'telegram' => [
    'driver' => 'telegram',
    'bot_token' => '123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11',
    'chat_id' => '123456789',
    'min_level' => 'error',
    'parse_mode' => 'HTML', // HTML –∏–ª–∏ Markdown
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üì± –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üòÄ –≠–º–æ–¥–∑–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (HTML/Markdown)
- ‚è±Ô∏è Timestamp –≤–∫–ª—é—á–µ–Ω
- üîí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤

**–§–æ—Ä–º–∞—Ç—ã:**

HTML (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
```
üî• CRITICAL

Database server crashed!

example.com | 2025-09-30 14:23:45
```

Markdown:
```
üî• *CRITICAL*

Database server crashed\!

_example.com | 2025-09-30 14:23:45_
```

---

## –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5 —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏:

| –£—Ä–æ–≤–µ–Ω—å | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –≠–º–æ–¥–∑–∏ |
|---------|-------|----------|--------|
| `debug` | `Logger::debug()` | –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è | üêõ |
| `info` | `Logger::info()` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | ‚ÑπÔ∏è |
| `warning` | `Logger::warning()` | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è | ‚ö†Ô∏è |
| `error` | `Logger::error()` | –û—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | ‚ùå |
| `critical` | `Logger::critical()` | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ | üî• |

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏ –≤—ã—à–µ:

```php
Logger::setMinLevel('warning');

// –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
Logger::debug('...');  
Logger::info('...');   

// –õ–æ–≥–∏—Ä—É—é—Ç—Å—è:
Logger::warning('...');  
Logger::error('...');    
Logger::critical('...');  
```

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:

### –ü—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

```php
Logger::info('User {username} performed action {action}', [
    'username' => 'john_doe',
    'action' => 'login'
]);
```

### –ú–∞—Å—Å–∏–≤—ã –∏ –æ–±—ä–µ–∫—Ç—ã

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ JSON:

```php
Logger::error('API request failed', [
    'endpoint' => '/api/users',
    'params' => ['id' => 123, 'include' => ['posts', 'comments']],
    'response' => ['error' => 'Not found', 'code' => 404]
]);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// API request failed {"endpoint":"\/api\/users","params":{"id":123,...},...}
```

---

## –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ª–æ–≥–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç:

### –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```php
'channels' => 'file,slack,telegram',
```

–∏–ª–∏

```php
'channels' => ['file', 'slack', 'telegram'],
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```php
use Core\Logger;
use Core\Logger\FileHandler;
use Core\Logger\SlackHandler;

Logger::addHandler(new FileHandler('/path/to/app.log'));
Logger::addHandler(new SlackHandler('webhook_url', '#logs'));

Logger::error('This goes to both file and Slack');
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Development:**
```php
'channels' => 'file',
'min_level' => 'debug',
```

**Staging:**
```php
'channels' => 'file,slack',
'min_level' => 'info',
'drivers' => [
    'slack' => ['min_level' => 'error'] // –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –≤ Slack
]
```

**Production:**
```php
'channels' => 'file,slack,telegram',
'min_level' => 'warning',
'drivers' => [
    'file' => ['min_level' => 'warning'],
    'slack' => ['min_level' => 'error'],
    'telegram' => ['min_level' => 'critical'] // –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤ Telegram
]
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞

### 1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥—Ä–∞–π–≤–µ—Ä–∞

```php
<?php

namespace Core\Logger;

class CustomHandler implements LogHandlerInterface
{
    protected string $endpoint;
    protected string $minLevel;
    
    public function __construct(string $endpoint, string $minLevel = 'debug')
    {
        $this->endpoint = $endpoint;
        $this->minLevel = $minLevel;
    }
    
    public function handle(string $level, string $message): void
    {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
        if (!$this->shouldLog($level)) {
            return;
        }
        
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
        $this->sendLog($level, $message);
    }
    
    protected function shouldLog(string $level): bool
    {
        $levels = ['debug', 'info', 'warning', 'error', 'critical'];
        $currentIndex = array_search($level, $levels);
        $minIndex = array_search($this->minLevel, $levels);
        
        return $currentIndex >= $minIndex;
    }
    
    protected function sendLog(string $level, string $message): void
    {
        // –í–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        // –ù–∞–ø—Ä–∏–º–µ—Ä: HTTP –∑–∞–ø—Ä–æ—Å –∫ API, –∑–∞–ø–∏—Å—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥.
    }
}
```

### 2. –î–æ–±–∞–≤—å—Ç–µ –≤ Logger::createDriver()

–í —Ñ–∞–π–ª–µ `core/Logger.php`:

```php
protected static function createDriver(string $name, array $config): ?LogHandlerInterface
{
    $driver = $config['driver'] ?? $name;

    try {
        switch ($driver) {
            // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥—Ä–∞–π–≤–µ—Ä—ã ...
            
            case 'custom':
                return new CustomHandler(
                    $config['endpoint'] ?? '',
                    $config['min_level'] ?? 'debug'
                );
            
            default:
                return null;
        }
    } catch (\Exception $e) {
        error_log("Failed to create logger driver '$name': " . $e->getMessage());
        return null;
    }
}
```

### 3. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```php
'drivers' => [
    // ...
    
    'custom' => [
        'driver' => 'custom',
        'endpoint' => env('LOG_CUSTOM_ENDPOINT', ''),
        'min_level' => 'info',
    ],
],
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ

```php
'channels' => 'file,custom',
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```php
try {
    // –í–∞—à –∫–æ–¥
} catch (\Exception $e) {
    Logger::error('Exception caught: {message}', [
        'message' => $e->getMessage(),
        'file' => $e->getFile(),
        'line' => $e->getLine(),
        'trace' => $e->getTraceAsString()
    ]);
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

```php
Logger::debug('SQL Query: {query}', [
    'query' => $sql,
    'bindings' => $bindings,
    'time' => $executionTime . 'ms'
]);
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

```php
Logger::info('HTTP {method} {url}', [
    'method' => $_SERVER['REQUEST_METHOD'],
    'url' => $_SERVER['REQUEST_URI'],
    'ip' => $_SERVER['REMOTE_ADDR'],
    'user_agent' => $_SERVER['HTTP_USER_AGENT']
]);
```

### –£—Å–ª–æ–≤–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
if (Logger::getMinLevel() === 'debug') {
    Logger::debug('Detailed debug info', $debugData);
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
php vendor/bin/pest tests/Unit/Core/Logger
```

### –¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:

- ‚úÖ –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –í—Å–µ –¥—Ä–∞–π–≤–µ—Ä—ã (File, Slack, Telegram)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## Best Practices

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏

```php
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
Logger::error('User logged in');

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
Logger::info('User logged in');
```

### 2. –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç

```php
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
Logger::error('Database error');

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
Logger::error('Database connection failed: {error}', [
    'error' => $e->getMessage(),
    'host' => $dbHost,
    'database' => $dbName
]);
```

### 3. –ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```php
// ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã –∏ —Ç.–¥.
Logger::debug('Login attempt', [
    'username' => $username,
    'password' => $password  // ‚ùå –û–ü–ê–°–ù–û!
]);

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
Logger::debug('Login attempt', [
    'username' => $username
]);
```

### 4. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è production

```php
// Development
'min_level' => 'debug',

// Production
'min_level' => 'warning',
```

### 5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π

```php
'drivers' => [
    'file' => ['min_level' => 'debug'],     // –í—Å–µ –≤ —Ñ–∞–π–ª
    'slack' => ['min_level' => 'error'],    // –û—à–∏–±–∫–∏ –≤ Slack
    'telegram' => ['min_level' => 'critical'] // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤ Telegram
]
```

---

## Troubleshooting

### –õ–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–≥–æ–≤:
```bash
chmod 755 storage/logs
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å:
```php
Logger::setMinLevel('debug');
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã:
```php
var_dump(Logger::getHandlers());
```

### Slack/Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ curl:
```php
var_dump(function_exists('curl_init'));
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL / bot token:
```php
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
echo env('LOG_SLACK_WEBHOOK_URL');
echo env('LOG_TELEGRAM_BOT_TOKEN');
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥—Ä–∞–π–≤–µ—Ä–∞:
```php
'slack' => [
    'min_level' => 'debug', // –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
]
```

---

## FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ file handlers —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏?**

A: –î–∞! –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ:
```php
Logger::addHandler(new FileHandler('/path/to/app.log'));
Logger::addHandler(new FileHandler('/path/to/errors.log'));
```

**Q: –ö–∞–∫ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –≤ Slack?**

A: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `min_level` –¥–ª—è –¥—Ä–∞–π–≤–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ `critical`:
```php
'slack' => ['min_level' => 'critical']
```

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ?**

A: –î–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å:
```php
Logger::setMinLevel('critical'); // –ò–ª–∏ –≤—ã—à–µ
```

**Q: –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏?**

A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ clearHandlers():
```php
Logger::clearHandlers();
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏, –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –∫–∞–Ω–∞–ª—ã –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã!

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- [Debug System](./Debug.md)
- [Error Handler](./Debug.md#error-handler)
- [Environment](./Env.md)
