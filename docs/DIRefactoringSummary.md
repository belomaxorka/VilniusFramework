# –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ DI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã - –°–≤–æ–¥–∫–∞

## üéØ –¶–µ–ª—å

–†–µ—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –≤ –æ—Ç—á–µ—Ç–∞—Ö:
- –°–º–µ—à–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ instance-based –ø–æ–¥—Ö–æ–¥–æ–≤
- –ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã
- –ù–∞—Ä—É—à–µ–Ω–∏–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –º–æ–∫–∞–º–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤

```
core/
‚îú‚îÄ‚îÄ Contracts/              # 5 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ HttpInterface.php
‚îÇ   ‚îú‚îÄ‚îÄ ConfigInterface.php
‚îÇ   ‚îú‚îÄ‚îÄ LoggerInterface.php
‚îÇ   ‚îú‚îÄ‚îÄ SessionInterface.php
‚îÇ   ‚îî‚îÄ‚îÄ DatabaseInterface.php
‚îÇ
‚îú‚îÄ‚îÄ Services/              # 4 instance-based —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ HttpService.php
‚îÇ   ‚îú‚îÄ‚îÄ ConfigRepository.php
‚îÇ   ‚îú‚îÄ‚îÄ LoggerService.php
‚îÇ   ‚îî‚îÄ‚îÄ SessionManager.php
‚îÇ
‚îî‚îÄ‚îÄ Facades/               # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Ñ–∞—Å–∞–¥–æ–≤
    ‚îî‚îÄ‚îÄ Facade.php
```

### 2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã –≤ —Ñ–∞—Å–∞–¥—ã

| –ö–ª–∞—Å—Å | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|-------|------|-------|
| `Http` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å | –§–∞—Å–∞–¥ ‚Üí `HttpService` |
| `Config` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å | –§–∞—Å–∞–¥ ‚Üí `ConfigRepository` |
| `Logger` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å | –§–∞—Å–∞–¥ ‚Üí `LoggerService` |
| `Session` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å | –§–∞—Å–∞–¥ ‚Üí `SessionManager` |
| `Database` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å | –§–∞—Å–∞–¥ ‚Üí `DatabaseManager` |

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ DI

#### ‚ùå –ë—ã–ª–æ:
```php
class SessionManager {
    public static function start() {
        if (Http::isSecure()) {  // –ñ–µ—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å!
            // ...
        }
    }
}
```

#### ‚úÖ –°—Ç–∞–ª–æ:
```php
class SessionManager implements SessionInterface {
    public function __construct(
        private HttpInterface $http  // DI!
    ) {}
    
    public function start() {
        if ($this->http->isSecure()) {  // –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å!
            // ...
        }
    }
}
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã Router –∏ TemplateEngine

- **Router** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `HttpInterface` —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- **TemplateEngine** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `LoggerInterface` —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç lazy loading –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã

### 5. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω bootstrap

#### ‚ùå –ë—ã–ª–æ (–ø—Ä–æ–±–ª–µ–º–∞):
```php
// public/index.php
Core::init();  // –ó–¥–µ—Å—å Config::loadCached() - –æ—à–∏–±–∫–∞!
$container = Container::getInstance();
$services = Config::get('services');  // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤!
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤...
```

#### ‚úÖ –°—Ç–∞–ª–æ (—Ä–µ—à–µ–Ω–∏–µ):
```php
// Core::init() –≤–Ω—É—Ç—Ä–∏:
1. initEnvironment()     // Env::load()
2. initContainer()       // –ó–∞–≥—Ä—É–∑–∫–∞ services.php
3. initConfigLoader()    // Config —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4. initDebugSystem()
5. initializeLang()
6. initializeDatabase()
7. initializeEmailer()

// public/index.php
Core::init();  // –í—Å–µ –≥–æ—Ç–æ–≤–æ!
$container = Container::getInstance();
$router = $container->make(\Core\Router::class);
```

### 6. –û–±–µ—Å–ø–µ—á–µ–Ω–∞ 100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

```php
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
Config::get('app.name');
Logger::info('Test');
Session::start();
Http::getHost();
Database::table('users')->get();
```

## üêõ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Target [Core\Contracts\ConfigInterface] is not instantiable

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Config —Ñ–∞—Å–∞–¥–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–Ω –º–µ—Ç–æ–¥ `Core::initContainer()` –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç `services.php`
2. –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–æ Config
3. –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `ConfigInterface`

**–§–∞–π–ª—ã:**
- `core/Core.php` - –¥–æ–±–∞–≤–ª–µ–Ω `initContainer()`, –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫
- `core/Contracts/ConfigInterface.php` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `cache()`, `loadCached()`
- `core/Services/ConfigRepository.php` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `public/index.php` - —É–ø—Ä–æ—â–µ–Ω, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ Core

### –ü—Ä–æ–±–ª–µ–º–∞ 2: transaction() must be compatible with DatabaseInterface::transaction(): mixed

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ DatabaseManager

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –ë—ã–ª–æ:
public function transaction(callable $callback)

// –°—Ç–∞–ª–æ:
public function transaction(callable $callback): mixed
```

**–§–∞–π–ª—ã:**
- `core/Database/DatabaseManager.php` - –¥–æ–±–∞–≤–ª–µ–Ω `: mixed`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Call to undefined method Core\Database::table()

**–ü—Ä–∏—á–∏–Ω–∞:** –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è type hint `Database` (—Ñ–∞—Å–∞–¥) –≤–º–µ—Å—Ç–æ `DatabaseInterface`

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –ë—ã–ª–æ:
use Core\Database;
protected Database $db

// –°—Ç–∞–ª–æ:
use Core\Contracts\DatabaseInterface;
protected DatabaseInterface $db
```

**–§–∞–π–ª—ã:**
- `app/Controllers/HomeController.php` - –∑–∞–º–µ–Ω–µ–Ω –∏–º–ø–æ—Ä—Ç –∏ type hint

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ –∏ –ø–æ—Å–ª–µ

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ ‚ùå

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Controller  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã)
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Config::get()
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Logger::info()
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Session::get()
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Database::table()

–ü—Ä–æ–±–ª–µ–º—ã:
- –ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ù–∞—Ä—É—à–µ–Ω–∏–µ SOLID
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ ‚úÖ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Controller  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
       ‚îÇ (DI)       ‚îÇ
       ‚îÇ            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   Container     ‚îÇ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ConfigInterface ‚îÄ‚îÄ‚ñ∫ ConfigRepository
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ LoggerInterface ‚îÄ‚îÄ‚ñ∫ LoggerService
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ SessionInterface ‚îÄ‚ñ∫ SessionManager
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ DatabaseInterface ‚îÄ‚ñ∫ DatabaseManager

–§–∞—Å–∞–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
Config::get() ‚îÄ‚îÄ‚ñ∫ ConfigInterface ‚îÄ‚îÄ‚ñ∫ ConfigRepository
Logger::info() ‚îÄ‚ñ∫ LoggerInterface ‚îÄ‚îÄ‚ñ∫ LoggerService
Session::get() ‚îÄ‚ñ∫ SessionInterface ‚îÄ‚ñ∫ SessionManager

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –º–æ–∫–∞–º–∏
‚úÖ –°–æ–±–ª—é–¥–µ–Ω–∏–µ SOLID
‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (14):

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
1. `core/Contracts/HttpInterface.php`
2. `core/Contracts/ConfigInterface.php`
3. `core/Contracts/LoggerInterface.php`
4. `core/Contracts/SessionInterface.php`
5. `core/Contracts/DatabaseInterface.php`

**–°–µ—Ä–≤–∏—Å—ã:**
6. `core/Services/HttpService.php`
7. `core/Services/ConfigRepository.php`
8. `core/Services/LoggerService.php`
9. `core/Services/SessionManager.php`

**–§–∞—Å–∞–¥—ã:**
10. `core/Facades/Facade.php`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
11. `docs/DIRefactoringComplete.md`
12. `docs/DIRefactoringBootstrapFix.md`
13. `docs/DIUsageGuide.md`
14. `docs/DIRefactoringSummary.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (11):

1. `core/Http.php` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–∞—Å–∞–¥
2. `core/Config.php` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–∞—Å–∞–¥
3. `core/Logger.php` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–∞—Å–∞–¥
4. `core/Session.php` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–∞—Å–∞–¥
5. `core/Database.php` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–∞—Å–∞–¥
6. `core/Router.php` - –¥–æ–±–∞–≤–ª–µ–Ω–æ DI –¥–ª—è HttpInterface
7. `core/TemplateEngine.php` - –¥–æ–±–∞–≤–ª–µ–Ω–æ DI –¥–ª—è LoggerInterface
8. `core/Database/DatabaseManager.php` - –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –¥–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞
9. `core/Core.php` - –¥–æ–±–∞–≤–ª–µ–Ω `initContainer()`, –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
10. `config/services.php` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∏–≤—è–∑–∫–∞–º–∏
11. `public/index.php` - —É–ø—Ä–æ—â–µ–Ω, —É–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
12. `app/Controllers/HomeController.php` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω type hint

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (1):

1. `core/Database/DatabaseInterface.php` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `core/Contracts/DatabaseInterface.php`

## üéì –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

### –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è DI):

```php
use Core\Contracts\DatabaseInterface;
use Core\Contracts\LoggerInterface;

class MyController extends Controller
{
    public function __construct(
        Request $request,
        Response $response,
        private DatabaseInterface $db,      // ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å!
        private LoggerInterface $logger     // ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å!
    ) {
        parent::__construct($request, $response);
    }

    public function index()
    {
        $this->logger->info('Action called');
        $users = $this->db->table('users')->get();
    }
}
```

### –í –ø—Ä–æ—Å—Ç–æ–º –∫–æ–¥–µ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞—Å–∞–¥—ã):

```php
use Core\Logger;
use Core\Database;

// –§–∞—Å–∞–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
Logger::info('Something happened');
$users = Database::table('users')->get();
```

### ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞—Å–∞–¥—ã –≤ type hints!

```php
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
use Core\Database;
protected Database $db;

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
use Core\Contracts\DatabaseInterface;
protected DatabaseInterface $db;
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã:

```php
class UserServiceTest extends TestCase
{
    public function test_create_user()
    {
        $dbMock = $this->createMock(DatabaseInterface::class);
        $loggerMock = $this->createMock(LoggerInterface::class);
        
        $dbMock->expects($this->once())
            ->method('table')
            ->with('users');
            
        $service = new UserService($dbMock, $loggerMock);
        $service->createUser(['name' => 'John']);
    }
}
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ë—ã–ª–æ ‚ùå

- ‚ùå –°–º–µ—à–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ instance-based –ø–æ–¥—Ö–æ–¥–æ–≤
- ‚ùå –ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ static –≤—ã–∑–æ–≤—ã
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- ‚ùå –°–ª–æ–∂–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ–¥–∞

### –°—Ç–∞–ª–æ ‚úÖ

- ‚úÖ –ß–∏—Å—Ç–∞—è DI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–æ–∫–∞–º–∏
- ‚úÖ –°–æ–±–ª—é–¥–µ–Ω–∏–µ –≤—Å–µ—Ö SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- ‚úÖ 100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞
- ‚úÖ –ß–∏—Å—Ç—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ù–æ–≤—ã–π –∫–æ–¥** - –ø–∏—à–∏—Ç–µ —Å DI —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
2. **–°—Ç–∞—Ä—ã–π –∫–æ–¥** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –Ω–∞ DI
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–∏—à–∏—Ç–µ unit-—Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è Cookie, Path, Lang (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ DI)
- –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ü—Ä–æ–≤–µ—Å—Ç–∏ code review —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–æ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞:

1. **DIRefactoringComplete.md** - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. **DIRefactoringBootstrapFix.md** - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. **DIUsageGuide.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏!)
4. **DIRefactoringSummary.md** - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç (–∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- [x] –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Facade
- [x] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã –≤ —Ñ–∞—Å–∞–¥—ã
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã Router –∏ TemplateEngine
- [x] –ü–µ—Ä–µ–ø–∏—Å–∞–Ω config/services.php
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- [x] –†–µ—à–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –∑–∞–ø—É—Å–∫–∞
- [x] –û–±–µ—Å–ø–µ—á–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω!**

–í–∞—à —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é DI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –§–∞—Å–∞–¥–∞–º–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥–∫–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –°–æ–±–ª—é–¥–µ–Ω–∏–µ–º SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤ —Ä–µ—à–µ–Ω—ã! üöÄ**

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2025-10-04*  
*–í–µ—Ä—Å–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞: Vilnius Framework*  
*–ê–≤—Ç–æ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞: AI Assistant*

