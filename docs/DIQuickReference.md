# DI Architecture - Quick Reference

## üî¥ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö–ª–∞—Å—Å—ã —Å–æ —Å–º–µ—à–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

| –ö–ª–∞—Å—Å | –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å |
|-------|----------|--------|
| `Database` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π singleton + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ DI | ‚ùå –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ |
| `TemplateEngine` | `getInstance()` + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ DI | ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `Config` | –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DI |
| `Logger` | –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DI |
| `Session` | –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DI |
| `Http` | –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DI |
| `Cookie` | –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è DI |

### 2. –ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```php
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã —Å–æ–∑–¥–∞—é—Ç –∂–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
class Router {
    protected function handleNotFound() {
        echo ErrorRenderer::render(404, 'Not Found'); // –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ ErrorRenderer
    }
    
    protected function getGroupDomain() {
        $currentDomain = Http::getHost(); // –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ Http
    }
}

class TemplateEngine {
    private function logUndefinedVariable() {
        Logger::warning($message); // –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ Logger
    }
}

class Session {
    public static function start() {
        if (Http::isSecure()) { // –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ Http
            // ...
        }
    }
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏
- –ù–∞—Ä—É—à–∞–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø –∏–Ω–≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DIP)

### 3. –ù–µ–≤–µ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```php
// config/services.php
'aliases' => [
    'config' => \Core\Config::class,    // ‚ùå –ö–ª–∞—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π
    'logger' => \Core\Logger::class,    // ‚ùå –ö–ª–∞—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π
    'session' => \Core\Session::class,  // ‚ùå –ö–ª–∞—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π
    'http' => \Core\Http::class,        // ‚ùå –ö–ª–∞—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π
]
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–∏ –∫–ª–∞—Å—Å—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∫ instance, –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º DI

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Contracts/                     ‚îÇ
‚îÇ              (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)                        ‚îÇ
‚îÇ  SessionInterface, HttpInterface, ConfigInterface‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ implements
                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Services/                       ‚îÇ
‚îÇ           (Instance-based –∫–ª–∞—Å—Å—ã)                ‚îÇ
‚îÇ  SessionManager, HttpService, ConfigRepository   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑
                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Facades/                        ‚îÇ
‚îÇ           (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–µ—Ä—Ç–∫–∏)                  ‚îÇ
‚îÇ     Session, Http, Config (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞ –¥–ª—è DI

```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Instance-based —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// 1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
interface SessionInterface {
    public function start(array $options = []): bool;
    public function get(string $key, mixed $default = null): mixed;
}

// 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å DI
class SessionManager implements SessionInterface {
    public function __construct(
        private HttpInterface $http  // ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    ) {}
    
    public function start(array $options = []): bool {
        if ($this->http->isSecure()) {  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            // ...
        }
    }
}

// 3. –§–∞—Å–∞–¥ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
class Session {
    private static ?SessionInterface $instance = null;
    
    protected static function getManager(): SessionInterface {
        if (self::$instance === null) {
            self::$instance = Container::getInstance()->make(SessionInterface::class);
        }
        return self::$instance;
    }
    
    public static function start(array $options = []): bool {
        return self::getManager()->start($options);
    }
}

// 4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
'singletons' => [
    SessionInterface::class => SessionManager::class,
]
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∞—Å—Å–∞

### –î–æ–ª–∂–µ–Ω –ª–∏ –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ DI?

#### ‚úÖ –î–ê, –µ—Å–ª–∏ –∫–ª–∞—Å—Å:
- [ ] –ò–º–µ–µ—Ç **—Å–æ—Å—Ç–æ—è–Ω–∏–µ** (instance –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- [ ] –ò–º–µ–µ—Ç **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤
- [ ] –¢—Ä–µ–±—É–µ—Ç **–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- [ ] –ù—É–∂–Ω–æ **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å –º–æ–∫–∞–º–∏
- [ ] –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å **—Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–ü—Ä–∏–º–µ—Ä—ã:** `SessionManager`, `DatabaseManager`, `LoggerService`, `ConfigRepository`, `TemplateEngine`

#### ‚ùå –ù–ï–¢, –µ—Å–ª–∏ –∫–ª–∞—Å—Å:
- [ ] –¢–æ–ª—å–∫–æ **—É—Ç–∏–ª–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] –ü—Ä–æ—Å—Ç—ã–µ **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ö–µ–ª–ø–µ—Ä—ã**
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **–≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏** ($_SERVER, $_POST)

**–ü—Ä–∏–º–µ—Ä—ã:** `Str::random()`, `Arr::flatten()`, –≤–æ–∑–º–æ–∂–Ω–æ `Path::normalize()`

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ –¥–ª—è DI

```php
// ‚ùå –ü–õ–û–•–û
class MyService {
    public static function doSomething() {
        $config = Config::get('app.name');      // –ñ–µ—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
        Logger::info('Doing something');         // –ñ–µ—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
        // ...
    }
}

// ‚úÖ –•–û–†–û–®–û
class MyService {
    public function __construct(
        private ConfigInterface $config,   // ‚úÖ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
        private LoggerInterface $logger    // ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω—ã
    ) {}
    
    public function doSomething() {
        $name = $this->config->get('app.name');
        $this->logger->info('Doing something');
        // ...
    }
}
```

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ)

1. **Config** ‚Üí `ConfigRepository`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤

2. **Logger** ‚Üí `LoggerService`  
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
   - –í–∞–∂–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

3. **Session** ‚Üí `SessionManager`
   - –ö—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **Database** ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DatabaseManager` –Ω–∞–ø—Ä—è–º—É—é
   - –£–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –æ–±–µ—Ä—Ç–∫—É
   - –£–∂–µ –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

5. **Http** ‚Üí `HttpService`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Session, Router
   - –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

6. **Cookie** - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å
7. **Path** - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å

## üîß –ü—Ä–∏–º–µ—Ä—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```php
// ‚ùå –ë–´–õ–û
class UserController {
    public function profile() {
        $userId = Session::get('user_id');
        $user = Database::table('users')->find($userId);
        $appName = Config::get('app.name');
        Logger::info('User visited profile');
        
        return view('profile', ['user' => $user]);
    }
}

// ‚úÖ –°–¢–ê–õ–û
class UserController {
    public function __construct(
        private SessionInterface $session,
        private DatabaseInterface $db,
        private ConfigInterface $config,
        private LoggerInterface $logger,
        private TemplateEngine $view
    ) {}
    
    public function profile() {
        $userId = $this->session->get('user_id');
        $user = $this->db->table('users')->find($userId);
        $appName = $this->config->get('app.name');
        $this->logger->info('User visited profile');
        
        return $this->view->render('profile', ['user' => $user]);
    }
}
```

### –°–µ—Ä–≤–∏—Å

```php
// ‚ùå –ë–´–õ–û
class EmailService {
    public function sendWelcome(User $user) {
        $fromEmail = Config::get('mail.from');
        $appName = Config::get('app.name');
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞...
        
        Logger::info("Welcome email sent to {$user->email}");
    }
}

// ‚úÖ –°–¢–ê–õ–û
class EmailService {
    public function __construct(
        private ConfigInterface $config,
        private LoggerInterface $logger,
        private MailerInterface $mailer
    ) {}
    
    public function sendWelcome(User $user) {
        $fromEmail = $this->config->get('mail.from');
        $appName = $this->config->get('app.name');
        
        $this->mailer->send(/* ... */);
        
        $this->logger->info("Welcome email sent to {$user->email}");
    }
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å)

```php
// ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å Config, Logger
class UserService {
    public function create(array $data) {
        $maxUsers = Config::get('limits.max_users');
        Logger::info('Creating user');
        // ...
    }
}

// ‚ùå –ù–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π unit-—Ç–µ—Å—Ç
public function test_create_user() {
    // –ö–∞–∫ –ø–æ–¥–º–µ–Ω–∏—Ç—å Config –∏ Logger? –ù–∏–∫–∞–∫!
    $service = new UserService();
    $service->create(['name' => 'John']);
}
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å)

```php
// ‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
class UserService {
    public function __construct(
        private ConfigInterface $config,
        private LoggerInterface $logger
    ) {}
    
    public function create(array $data) {
        $maxUsers = $this->config->get('limits.max_users');
        $this->logger->info('Creating user');
        // ...
    }
}

// ‚úÖ –õ–µ–≥–∫–∏–π unit-—Ç–µ—Å—Ç —Å –º–æ–∫–∞–º–∏
public function test_create_user() {
    $configMock = $this->createMock(ConfigInterface::class);
    $loggerMock = $this->createMock(LoggerInterface::class);
    
    $configMock->expects($this->once())
        ->method('get')
        ->with('limits.max_users')
        ->willReturn(100);
    
    $loggerMock->expects($this->once())
        ->method('info')
        ->with('Creating user');
    
    $service = new UserService($configMock, $loggerMock);
    $service->create(['name' => 'John']);
}
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [DIAnalysis.md](DIAnalysis.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
- [DIRefactoringExample.md](DIRefactoringExample.md) - –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ Session
- [DependencyInjection.md](DependencyInjection.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É

## üéì –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
2. **–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
3. **–û–¥–∏–Ω —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è** - –ª–∏–±–æ DI, –ª–∏–±–æ —Å—Ç–∞—Ç–∏–∫–∞, –Ω–µ –æ–±–∞ —Å—Ä–∞–∑—É
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª—é–±–æ–π –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –º–æ–∫–∞–º–∏
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞—Å–∞–¥—ã –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤–µ—Å—å –∫–æ–¥ —Å—Ä–∞–∑—É?**  
A: –ù–µ—Ç! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞—Å–∞–¥—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä—å—Ç–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —É—Ç–∏–ª–∏—Ç–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ —Ç–∏–ø–∞ `Str`, `Arr`?**  
A: –û—Å—Ç–∞–≤—å—Ç–µ –∏—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏, –æ–Ω–∏ –Ω–µ –∏–º–µ—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**Q: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI –≤ middleware?**  
A: Middleware —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.

**Q: –ù—É–∂–Ω–æ –ª–∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞—Å–∞–¥—ã?**  
A: –ù–µ—Ç, —Ñ–∞—Å–∞–¥—ã –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI.

**Q: –ö–∞–∫ –±—ã—Ç—å —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (helpers)?**  
A: –û—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —É—Ç–∏–ª–∏—Ç, –Ω–æ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI.

