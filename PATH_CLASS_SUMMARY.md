# ‚úÖ –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å Core\Path

## –ü—Ä–æ–±–ª–µ–º–∞

–§—É–Ω–∫—Ü–∏—è `normalize_path()` –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –≤–º–µ—Å—Ç–µ —Å —Ö–µ–ª–ø–µ—Ä–∞–º–∏, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –≤ –∫–æ–¥–µ –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—É—Ç–µ–π.

## –†–µ—à–µ–Ω–∏–µ

–í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–º–µ–Ω—ã –Ω–∞ `str_replace()` —Å–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å-—É—Ç–∏–ª–∏—Ç–∞ `Core\Path` —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

---

## üì¶ –ö–ª–∞—Å—Å Core\Path

**–§–∞–π–ª:** `core/Path.php`  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~150  
**–ú–µ—Ç–æ–¥–æ–≤:** 13  

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
```php
Path::normalize($path)      // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (\ ‚Üí /)
Path::relative($path)       // –ê–±—Å–æ–ª—é—Ç–Ω—ã–π ‚Üí –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π
Path::join(...$parts)       // –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–µ–π –ø—É—Ç–∏
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–∞—Ö
```php
Path::extension($path)      // –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
Path::filename($path)       // –ò–º—è –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
Path::basename($path)       // –ò–º—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
Path::dirname($path)        // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∏
```php
Path::isAbsolute($path)     // –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ª–∏ –ø—É—Ç—å
Path::exists($path)         // –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏
Path::isDirectory($path)    // –≠—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è?
Path::isFile($path)         // –≠—Ç–æ —Ñ–∞–π–ª?
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –ë—ã–ª–æ: normalize_path() —Ö–µ–ª–ø–µ—Ä

```php
// –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
$path = normalize_path($filePath);

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
// - –¢–æ–ª—å–∫–æ 1 –æ–ø–µ—Ä–∞—Ü–∏—è
// - –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å
// - –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
```

### –°—Ç–∞–ª–æ: Path –∫–ª–∞—Å—Å

```php
use Core\Path;

// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
$path = Path::normalize($filePath);

// + –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏
$relative = Path::relative($absolutePath);

// + –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
$config = Path::join(ROOT, 'config', 'app.php');

// + –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–∞—Ö
$ext = Path::extension($filename);

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
// ‚úÖ 13 –º–µ—Ç–æ–¥–æ–≤ –≤–º–µ—Å—Ç–æ 1
// ‚úÖ –Ø–≤–Ω—ã–π namespace
// ‚úÖ IDE –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
// ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–¥–µ

### core/DumpClient.php

**–ë—ã–ª–æ:**
```php
'file' => str_replace('\\', '/', $caller['file'] ?? 'unknown'),

$relativePath = str_replace([ROOT . '/', ROOT . '\\'], '', $file);
$relativePath = str_replace('\\', '/', $relativePath);
$normalizedLogFile = str_replace('\\', '/', $logFile);
```

**–°—Ç–∞–ª–æ:**
```php
'file' => \Core\Path::normalize($caller['file'] ?? 'unknown'),

$relativePath = \Core\Path::relative($file);
$normalizedLogFile = \Core\Path::normalize($logFile);
```

**–£–ª—É—á—à–µ–Ω–∏–µ:** 4 —Å—Ç—Ä–æ–∫–∏ ‚Üí 2 —Å—Ç—Ä–æ–∫–∏, –±–æ–ª–µ–µ —è–≤–Ω—ã–π –∫–æ–¥

### core/DumpServer.php

**–ë—ã–ª–æ:**
```php
$relativePath = str_replace([ROOT . '/', ROOT . '\\'], '', $file);
$relativePath = str_replace('\\', '/', $relativePath);
```

**–°—Ç–∞–ª–æ:**
```php
$relativePath = \Core\Path::relative($file);
```

**–£–ª—É—á—à–µ–Ω–∏–µ:** 2 —Å—Ç—Ä–æ–∫–∏ ‚Üí 1 —Å—Ç—Ä–æ–∫–∞

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
use Core\Path;

// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Windows –ø—É—Ç–µ–π
$path = Path::normalize('C:\Users\John\Documents\file.txt');
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 'C:/Users/John/Documents/file.txt'

// –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è –ª–æ–≥–æ–≤
$shortPath = Path::relative('/var/www/project/app/Controllers/Home.php');
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 'app/Controllers/Home.php'

// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π
$logPath = Path::join(ROOT, 'storage', 'logs', 'app.log');
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 'C:/project/storage/logs/app.log'
```

### –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ

```php
use Core\Path;
use Core\Logger;

class FileLogger {
    public function log(string $message): void {
        $backtrace = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 1);
        $file = $backtrace[0]['file'] ?? 'unknown';
        $line = $backtrace[0]['line'] ?? 0;
        
        // –ö–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞
        $shortFile = Path::relative($file);
        
        Logger::info("{$shortFile}:{$line} - {$message}");
    }
}
```

### –†–∞–±–æ—Ç–∞ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

```php
use Core\Path;

function processUpload(array $file): string {
    $originalName = $file['name'];
    $extension = Path::extension($originalName);
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–º—è
    $safeName = uniqid() . '.' . $extension;
    
    // –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    $uploadDir = Path::join(ROOT, 'storage', 'uploads');
    $targetPath = Path::join($uploadDir, $safeName);
    
    move_uploaded_file($file['tmp_name'], $targetPath);
    
    return Path::normalize($targetPath);
}
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: **[docs/Path.md](docs/Path.md)**

–í–∫–ª—é—á–∞–µ—Ç:
- API Reference –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã DO/DON'T
- –†–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ 13 –º–µ—Ç–æ–¥–æ–≤ –≤–º–µ—Å—Ç–æ 1 —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø—É—Ç—è–º–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è

### 2. –§–∏–ª–æ—Å–æ—Ñ–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- ‚úÖ –ö–ª–∞—Å—Å—ã –≤–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ Namespace Core\

### 3. Developer Experience
- ‚úÖ IDE –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ PHPDoc –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–≤

### 4. –ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–ª –∫–æ—Ä–æ—á–µ –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–µ
- ‚úÖ –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üéØ –ò—Ç–æ–≥

–í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–º–µ–Ω—ã `normalize_path()` –Ω–∞ `str_replace()` —Å–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å-—É—Ç–∏–ª–∏—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:

‚úÖ –†–µ—à–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π)  
‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å  
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞  
‚úÖ –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞  
‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  

**Path - –≤–∞—à —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏! üõ†Ô∏è**

---

_–°–æ–∑–¥–∞–Ω–æ: 2025-10-03_  
_–í–µ—Ä—Å–∏—è: 1.0_  
_–°—Ç–∞—Ç—É—Å: ‚úÖ READY_

