# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∫ –º–∏–Ω–∏–º–∞–ª–∏–∑–º—É —Ö–µ–ª–ø–µ—Ä–æ–≤ - –ó–ê–í–ï–†–®–ï–ù–ê

## üéâ –°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–¥–∞–ª–µ–Ω–æ —Ö–µ–ª–ø–µ—Ä–æ–≤: 50+ ‚Üí –æ—Å—Ç–∞–ª–æ—Å—å 4

#### ‚ùå –£–¥–∞–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã (7 –≥—Ä—É–ø–ø):
- `cache/` - Cache —Ö–µ–ª–ø–µ—Ä—ã
- `context/` - Debug Context —Ö–µ–ª–ø–µ—Ä—ã  
- `database/` - Database Debug —Ö–µ–ª–ø–µ—Ä—ã
- `debug/` - Debug —Ö–µ–ª–ø–µ—Ä—ã (6 —Ñ–∞–π–ª–æ–≤)
- `emailer/` - Emailer —Ö–µ–ª–ø–µ—Ä—ã
- `environment/` - Environment —Ö–µ–ª–ø–µ—Ä—ã
- `profiler/` - Profiler —Ö–µ–ª–ø–µ—Ä—ã

#### ‚ùå –£–¥–∞–ª–µ–Ω—ã –∏–∑ app/ (5 —Ñ–∞–π–ª–æ–≤):
- `container.php` - app(), resolve(), singleton()
- `csrf.php` - csrf_token(), csrf_field(), csrf_meta()
- `http.php` - request(), response(), json(), redirect(), back(), abort(), etc.
- `route.php` - route()
- `view.php` - view(), display(), template()

#### ‚úÖ –û—Å—Ç–∞–ª–æ—Å—å –≤ app/ (4 —Ñ–∞–π–ª–∞):
```
core/helpers/app/
‚îú‚îÄ‚îÄ config.php    ‚Üí config($key, $default)
‚îú‚îÄ‚îÄ env.php       ‚Üí env($key, $default)  
‚îú‚îÄ‚îÄ lang.php      ‚Üí __($key, $params)
‚îî‚îÄ‚îÄ vite.php      ‚Üí vite($entry)
```

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã —è–¥—Ä–∞ (3 —Ñ–∞–π–ª–∞)

#### `core/bootstrap.php`
```php
// –ë—ã–ª–æ: 8 –≥—Ä—É–ø–ø —Ö–µ–ª–ø–µ—Ä–æ–≤
\Core\HelperLoader::loadHelperGroups([
    'app', 'environment', 'debug', 'profiler', 
    'database', 'context', 'cache', 'emailer'
]);

// –°—Ç–∞–ª–æ: 1 –≥—Ä—É–ø–ø–∞
\Core\HelperLoader::loadHelperGroup('app'); // config(), env(), __(), vite()
```

#### `core/Response.php`
```php
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –º–µ—Ç–æ–¥ route()
// –ë—ã–ª–æ:
$url = route($name, $params);

// –°—Ç–∞–ª–æ:
$router = \Core\DebugToolbar::getRouter();
if (!$router) {
    throw new \RuntimeException('Router is not initialized');
}
$url = $router->route($name, $params);

// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –º–µ—Ç–æ–¥ view() ‚ö° HOTFIX
// –ë—ã–ª–æ:
$content = view($template, $data);

// –°—Ç–∞–ª–æ:
$content = \Core\TemplateEngine::getInstance()->render($template, $data);
```

#### `core/TemplateEngine.php`
```php
// Twig —Ñ—É–Ω–∫—Ü–∏–∏ - –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –∫–ª–∞—Å—Å–æ–≤

// route()
$this->addFunction('route', function (string $name, array $params = []) {
    $router = \Core\DebugToolbar::getRouter();
    return $router->route($name, $params);
});

// csrf_token()
$this->addFunction('csrf_token', function () {
    return \Core\Session::generateCsrfToken();
});

// csrf_field()
$this->addFunction('csrf_field', function () {
    $token = \Core\Session::generateCsrfToken();
    return '<input type="hidden" name="_csrf_token" value="' . htmlspecialchars($token, ENT_QUOTES, 'UTF-8') . '">';
});
```

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã

#### –£–¥–∞–ª–µ–Ω–æ:
- `tests/Unit/Core/Cache/CacheHelpersTest.php` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã

#### –°—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤, –Ω–µ —Ö–µ–ª–ø–µ—Ä—ã
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä-–æ—à–∏–±–æ–∫ –Ω–µ—Ç

---

### 4. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (6 —Ñ–∞–π–ª–æ–≤)

1. **`docs/Helpers.md`**  
   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è 4 —Ö–µ–ª–ø–µ—Ä–æ–≤ + —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

2. **`docs/DeprecatedHelpers.md`**  
   –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ö–µ–ª–ø–µ—Ä–æ–≤ (50+) —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

3. **`docs/HelpersMigrationGuide.md`**  
   –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

4. **`docs/MIGRATION_SUMMARY.md`**  
   –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏

5. **`REFACTORING_CHECKLIST.md`**  
   –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç

6. **`HOTFIX.md`**  
   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ view() –≤ Response.php

7. **`MIGRATION_COMPLETE.md`**  
   –≠—Ç–æ—Ç —Ñ–∞–π–ª - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|--------|-----------|
| –ì—Ä—É–ø–ø —Ö–µ–ª–ø–µ—Ä–æ–≤ | 8 | 1 | **-87.5%** |
| –§–∞–π–ª–æ–≤ —Ö–µ–ª–ø–µ—Ä–æ–≤ | 29 | 4 | **-86.2%** |
| –§—É–Ω–∫—Ü–∏–π-—Ö–µ–ª–ø–µ—Ä–æ–≤ | ~50+ | 4 | **-92%** |
| –ó–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | 29 | 4 | **-86.2%** |

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

- [x] –í—Å–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã
- [x] `core/` - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, –≤—ã–∑–æ–≤–æ–≤ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ö–µ–ª–ø–µ—Ä–æ–≤ –Ω–µ—Ç
- [x] `app/` - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, –≤—ã–∑–æ–≤–æ–≤ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ö–µ–ª–ø–µ—Ä–æ–≤ –Ω–µ—Ç  
- [x] `tests/` - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤
- [x] –õ–∏–Ω—Ç–µ—Ä-–æ—à–∏–±–æ–∫ –Ω–µ—Ç
- [x] Hotfix –¥–ª—è `Response::view()` –ø—Ä–∏–º–µ–Ω–µ–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞

---

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –•–µ–ª–ø–µ—Ä—ã (–æ—Å—Ç–∞–ª–æ—Å—å 4 - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ)

```php
config('app.name');           // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
env('API_KEY');               // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
__('welcome.message');        // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è  
vite('app');                  // Vite assets
```

### ‚úÖ –í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ö–µ–ª–ø–µ—Ä–æ–≤

#### –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö (–Ω–∞—Å–ª–µ–¥—É–π—Ç–µ –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ Controller)
```php
class MyController extends Controller 
{
    public function index(): Response 
    {
        // –î–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã:
        $this->json(['data' => $data]);
        $this->view('template', $vars);
        $this->redirect('/home');
        $this->back();
        $this->error('Message', 404);
        $this->success('OK', $data);
        
        // –ò —Å–≤–æ–π—Å—Ç–≤–∞:
        $this->request->input('name');
        $this->response->status(200);
    }
}
```

#### –í —Å–µ—Ä–≤–∏—Å–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–∞—Ö
```php
use Core\Cache;
use Core\Debug;
use Core\Logger;
use Core\Container;
use Core\Session;

// Cache
Cache::remember('key', 3600, fn() => $data);
Cache::forget('key');

// Debug
Debug::dump($variable);
Debug::dd($variable);

// Logger
Logger::info('Message');
Logger::error('Error', $context);

// Container
Container::getInstance()->make(MyService::class);

// Session
Session::generateCsrfToken();
Session::get('user_id');
```

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –Ø–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∞
```php
// –ë—ã–ª–æ
$users = cache_remember('users', 3600, fn() => User::all());

// –°—Ç–∞–ª–æ - —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Cache
use Core\Cache;
$users = Cache::remember('users', 3600, fn() => User::all());
```

### 2. IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ
- ‚úÖ "Go to definition" –≤–µ–¥–µ—Ç –∫ –∫–ª–∞—Å—Å—É
- ‚úÖ PHPDoc –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ 4 —Ñ–∞–π–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ 29 (-86%)
- ‚úÖ –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ PHPStan/Psalm –ª—É—á—à–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç
- ‚úÖ –ú–µ–Ω—å—à–µ false-positives
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ß–∏—Ç–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:

1. **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `docs/HelpersMigrationGuide.md`
2. **–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ–Ω:** `docs/DeprecatedHelpers.md`  
3. **–§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ API:** `docs/Helpers.md`
4. **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞:** `docs/MIGRATION_SUMMARY.md`

---

## ‚ú® –§–∏–ª–æ—Å–æ—Ñ–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

### –ë—ã–ª–æ: "–£–¥–æ–±—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –º–∞–≥–∏—é"
- –ú–Ω–æ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –°–∫—Ä—ã—Ç—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∏—Ç—å

### –°—Ç–∞–ª–æ: "–ü—Ä–æ—Å—Ç–æ—Ç–∞ —á–µ—Ä–µ–∑ —è–≤–Ω–æ—Å—Ç—å"  
- –ú–∏–Ω–∏–º—É–º –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –õ–µ–≥–∫–æ –æ—Ç–ª–∞–¥–∏—Ç—å –∏ –ø–æ–Ω—è—Ç—å

---

## üéâ –ò—Ç–æ–≥

**–ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

‚úÖ –§—Ä–µ–π–º–≤–æ—Ä–∫ —Å—Ç–∞–ª —á–∏—â–µ, –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ  
‚úÖ –ö–æ–¥ —Å—Ç–∞–ª —è–≤–Ω—ã–º - –≤–∏–¥–Ω–æ –æ—Ç–∫—É–¥–∞ —á—Ç–æ –±–µ—Ä–µ—Ç—Å—è  
‚úÖ IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —É–ª—É—á—à–µ–Ω–∞  
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞  

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

---

_–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 2025-10-03_  
_–í–µ—Ä—Å–∏—è: 2.0 (Minimalist Helpers)_

