# Request Collector - Changelog

## ๐ ะงัะพ ะฑัะปะพ ะดะพะฑะฐะฒะปะตะฝะพ ะฒ Debug Toolbar

ะะพะฑะฐะฒะปะตะฝ ะฝะพะฒัะน ะบะพะปะปะตะบัะพั **Request Collector** ะดะปั ะพัะพะฑัะฐะถะตะฝะธั ะฟะพะปะฝะพะน ะธะฝัะพัะผะฐัะธะธ ะพ HTTP-ะทะฐะฟัะพัะฐั ะฒ Debug Toolbar.

## ๐ฆ ะะพะฒัะต ัะฐะนะปั

### 1. `core/DebugToolbar/Collectors/RequestCollector.php`
ะัะฝะพะฒะฝะพะน ัะฐะนะป ะบะพะปะปะตะบัะพัะฐ, ะบะพัะพััะน ัะพะฑะธัะฐะตั ะธ ะพัะพะฑัะฐะถะฐะตั:
- โ GET ะฟะฐัะฐะผะตััั
- โ POST ะดะฐะฝะฝัะต
- โ ะะฐะณััะถะตะฝะฝัะต ัะฐะนะปั (FILES)
- โ Cookies
- โ HTTP Headers
- โ Server Variables
- โ ะะฐะทะพะฒะฐั ะธะฝัะพัะผะฐัะธั ะพ ะทะฐะฟัะพัะต (ะผะตัะพะด, URI, IP, ะฒัะตะผั)

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะบัััะธะต ััะฒััะฒะธัะตะปัะฝัั ะดะฐะฝะฝัั (ะฟะฐัะพะปะธ, ัะพะบะตะฝั)
- ะัะฐัะธะฒะพะต ัะฐะฑะปะธัะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต
- ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ HTTP ะผะตัะพะดะพะฒ
- ะะพะดะดะตัะถะบะฐ ะผะฝะพะถะตััะฒะตะฝะฝะพะน ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ
- ะกะฒะตัััะฒะฐะตะผัะต ัะตะบัะธะธ ะดะปั ะฑะพะปััะธั ะดะฐะฝะฝัั
- ะะฟัะตะดะตะปะตะฝะธะต ัะตะฐะปัะฝะพะณะพ IP ะบะปะธะตะฝัะฐ (ั ััะตัะพะผ proxy)
- ะะฟัะตะดะตะปะตะฝะธะต HTTPS ัะพะตะดะธะฝะตะฝะธะน

### 2. `app/Controllers/RequestDemoController.php`
ะะพะฝััะพะปะปะตั ะดะปั ะดะตะผะพะฝัััะฐัะธะพะฝะฝะพะน ัััะฐะฝะธัั.

### 3. `resources/views/request-demo.tpl`
ะะฝัะตัะฐะบัะธะฒะฝะฐั ะดะตะผะพะฝัััะฐัะธะพะฝะฝะฐั ัััะฐะฝะธัะฐ ั:
- ะคะพัะผะฐะผะธ ะดะปั ัะตััะธัะพะฒะฐะฝะธั POST ะทะฐะฟัะพัะพะฒ
- ะกััะปะบะฐะผะธ ะดะปั GET ะทะฐะฟัะพัะพะฒ ั ะฟะฐัะฐะผะตััะฐะผะธ
- ะะฐะณััะทะบะพะน ัะฐะนะปะพะฒ (ะพะดะธะฝะพัะฝะพะน ะธ ะผะฝะพะถะตััะฒะตะฝะฝะพะน)
- ะฃััะฐะฝะพะฒะบะพะน cookies
- ะัะฐัะธะฒัะผ ัะพะฒัะตะผะตะฝะฝัะผ UI

### 4. `docs/RequestCollector.md`
ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ Request Collector.

### 5. `docs/RequestCollectorQuickStart.md`
ะัะฐัะบะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

### 6. `REQUEST_COLLECTOR_CHANGES.md`
ะญัะพั ัะฐะนะป ั ะพะฟะธัะฐะฝะธะตะผ ะธะทะผะตะฝะตะฝะธะน.

## ๐ง ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั

### 1. `core/DebugToolbar.php`
**ะะทะผะตะฝะตะฝะธั:**
- ะะพะฑะฐะฒะปะตะฝ import `RequestCollector`
- ะะฐัะตะณะธัััะธัะพะฒะฐะฝ ะฝะพะฒัะน ะบะพะปะปะตะบัะพั ะฒ ะผะตัะพะดะต `initialize()`

```php
use Core\DebugToolbar\Collectors\RequestCollector;

// ...

self::addCollector(new RequestCollector());
```

### 2. `core/Router.php`
**ะะทะผะตะฝะตะฝะธั:**
- ะะพะฑะฐะฒะปะตะฝ ะผะตัะพะด `any()` ะดะปั ัะตะณะธัััะฐัะธะธ ะผะฐัััััะพะฒ ะฝะฐ ะฒัะต HTTP ะผะตัะพะดั

```php
public function any(string $uri, callable|array $action): void
{
    foreach (['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS', 'HEAD'] as $method) {
        $this->addRoute($method, $uri, $action);
    }
}
```

### 3. `public/index.php`
**ะะทะผะตะฝะตะฝะธั:**
- ะะพะฑะฐะฒะปะตะฝ ะผะฐััััั ะดะปั ะดะตะผะพ-ัััะฐะฝะธัั

```php
$router->any('demo', [\App\Controllers\RequestDemoController::class, 'demo']);
```

## ๐ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### ะะฐะฟััะบ ัะตัะฒะตัะฐ

```bash
cd public
php -S localhost:8000 index.php
```

### ะัะบัััั ะฒ ะฑัะฐัะทะตัะต

```
http://localhost:8000/demo
```

### ะะพัะผะพััะตัั ะฒ Debug Toolbar

1. ะัะบัะพะนัะต Debug Toolbar ะฒะฝะธะทั ัััะฐะฝะธัั
2. ะะตัะตะนะดะธัะต ะฝะฐ ะฒะบะปะฐะดะบั **๐ Request**
3. ะะทััะธัะต ะฒัะต ัะตะบัะธะธ ั ะดะฐะฝะฝัะผะธ ะทะฐะฟัะพัะฐ

## ๐ ะกัััะบัััะฐ Request Collector

```
๐ Request Information
โ
โโโ ๐ Basic Info
โ   โโโ Method (GET/POST/PUT/DELETE/etc.)
โ   โโโ URI
โ   โโโ Full URL
โ   โโโ Protocol (HTTP/1.1)
โ   โโโ Remote Address (IP)
โ   โโโ Request Time
โ
โโโ ๐ฅ GET Parameters
โ   โโโ Key-Value ัะฐะฑะปะธัะฐ
โ
โโโ ๐ค POST Parameters
โ   โโโ Key-Value ัะฐะฑะปะธัะฐ
โ
โโโ ๐ Uploaded Files
โ   โโโ ะขะฐะฑะปะธัะฐ ั: name, type, size, error, tmp_name
โ
โโโ ๐ช Cookies
โ   โโโ Key-Value ัะฐะฑะปะธัะฐ
โ
โโโ ๐ HTTP Headers
โ   โโโ Key-Value ัะฐะฑะปะธัะฐ
โ
โโโ โ๏ธ Server Variables
    โโโ Key-Value ัะฐะฑะปะธัะฐ (ัะฒะตัััะฒะฐะตะผะฐั)
```

## ๐จ ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ

Request Collector ะธัะฟะพะปัะทัะตั ัะฒะตัะพะฒัั ะบะพะดะธัะพะฒะบั ะดะปั HTTP ะผะตัะพะดะพะฒ:

| ะะตัะพะด  | ะฆะฒะตั       | Hex     |
|--------|------------|---------|
| GET    | ๐ข ะะตะปะตะฝัะน | #4caf50 |
| POST   | ๐ต ะกะธะฝะธะน   | #2196f3 |
| PUT    | ๐ ะัะฐะฝะถะตะฒัะน | #ff9800 |
| PATCH  | ๐ฃ ะคะธะพะปะตัะพะฒัะน | #9c27b0 |
| DELETE | ๐ด ะัะฐัะฝัะน | #f44336 |
| ะััะณะธะต | โซ ะกะตััะน   | #757575 |

## ๐ ะะตะทะพะฟะฐัะฝะพััั

Request Collector ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะบััะฒะฐะตั ััะฒััะฒะธัะตะปัะฝัะต ะดะฐะฝะฝัะต:

```
PHP_AUTH_PW       โ ***HIDDEN***
PHP_AUTH_USER     โ ***HIDDEN***
HTTP_AUTHORIZATION โ ***HIDDEN***
```

## ๐ ะัะธะพัะธัะตั ะพัะพะฑัะฐะถะตะฝะธั

Request Collector ะธะผะตะตั ะฟัะธะพัะธัะตั **90**, ััะพ ะพะทะฝะฐัะฐะตั:

1. **Overview** (100) - ะพัะพะฑัะฐะถะฐะตััั ะฟะตัะฒัะผ
2. **Request** (90) - ะพัะพะฑัะฐะถะฐะตััั ะฒัะพััะผ โ ะะะะซะ
3. ะััะณะธะต ะบะพะปะปะตะบัะพัั (< 90)

## โ ะขะตััะธัะพะฒะฐะฝะธะต

### ะขะตัั GET ะทะฐะฟัะพัะฐ

```
http://localhost:8000/demo?page=1&limit=10&search=test
```

### ะขะตัั POST ะทะฐะฟัะพัะฐ

ะัะฟะพะปัะทัะนัะต ัะพัะผั ะฝะฐ `/demo` ะธะปะธ cURL:

```bash
curl -X POST http://localhost:8000/demo \
  -d "username=john" \
  -d "email=john@example.com" \
  -d "message=Hello World"
```

### ะขะตัั ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ

```bash
curl -X POST http://localhost:8000/demo \
  -F "username=john" \
  -F "uploaded_file=@/path/to/file.txt"
```

### ะขะตัั custom headers

```bash
curl -H "X-Custom-Header: test" \
     -H "X-API-Key: secret-key" \
     http://localhost:8000/demo
```

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั API

### ะะพะปััะธัั ะบะพะปะปะตะบัะพั

```php
use Core\DebugToolbar;

$collector = DebugToolbar::getCollector('request');
```

### ะะทะผะตะฝะธัั ะฟัะธะพัะธัะตั

```php
$collector->setPriority(95);
```

### ะัะบะปััะธัั ะบะพะปะปะตะบัะพั

```php
$collector->setEnabled(false);
```

### ะะพะปััะธัั ัะพะฑัะฐะฝะฝัะต ะดะฐะฝะฝัะต

```php
$data = $collector->getData();

echo $data['method'];  // GET, POST, etc.
echo $data['uri'];     // /demo
echo $data['path'];    // /demo
print_r($data['get']); // GET ะฟะฐัะฐะผะตััั
print_r($data['post']); // POST ะดะฐะฝะฝัะต
```

## ๐ฏ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

Request Collector ะธะผะตะตั **ะผะธะฝะธะผะฐะปัะฝะพะต ะฒะปะธัะฝะธะต** ะฝะฐ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:

- โ ะะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ Debug ัะตะถะธะผะต
- โ ะะต ะฒัะฟะพะปะฝัะตั ะทะฐะฟัะพัะพะฒ ะบ ะะ
- โ ะะต ะดะตะปะฐะตั HTTP ะทะฐะฟัะพัะพะฒ
- โ ะัะฟะพะปัะทัะตั ัะพะปัะบะพ ะฒัััะพะตะฝะฝัะต ััะฟะตัะณlobals
- โ ะะฐะฝะฝัะต ัะพะฑะธัะฐัััั ะพะดะธะฝ ัะฐะท ะฟัะธ ัะตะฝะดะตัะธะฝะณะต
- โ ะะตะณะบะธะน HTML ะฒัะฒะพะด ะฑะตะท ััะถะตะปัั ะฑะธะฑะปะธะพัะตะบ

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- **ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั**: `docs/RequestCollector.md`
- **Quick Start**: `docs/RequestCollectorQuickStart.md`
- **Debug Toolbar**: `docs/DebugToolbar.md`
- **Custom Collectors**: `docs/DebugToolbarCollectors.md`

## ๐ฎ ะัะดััะธะต ัะปัััะตะฝะธั

ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั ะฒ ะฑัะดััะตะผ:

- [ ] Session ะดะฐะฝะฝัะต
- [ ] Response information
- [ ] Request/Response diff
- [ ] Export ะดะฐะฝะฝัั ะทะฐะฟัะพัะฐ ะฒ JSON
- [ ] History ะทะฐะฟัะพัะพะฒ
- [ ] Search/Filter ะฟะพ ะดะฐะฝะฝัะผ
- [ ] Raw request body ะดะปั JSON/XML API
- [ ] GraphQL query inspector

## ๐ ะะทะฒะตััะฝัะต ะพะณัะฐะฝะธัะตะฝะธั

1. Request Collector ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ Debug ัะตะถะธะผะต
2. ะะต ะพัะพะฑัะฐะถะฐะตั raw request body (ะดะปั JSON/XML API)
3. ะะต ะฟะพะบะฐะทัะฒะฐะตั Response ะดะฐะฝะฝัะต (ัะพะปัะบะพ Request)
4. ะะต ัะพััะฐะฝัะตั ะธััะพัะธั ะทะฐะฟัะพัะพะฒ ะผะตะถะดั ะฟะตัะตะทะฐะณััะทะบะฐะผะธ

## ๐ค ะะบะปะฐะด

Request Collector - ััะพ ัะฐััั ััะตะนะผะฒะพัะบะฐ TorrentPier. ะัะปะธ ั ะฒะฐั ะตััั ะธะดะตะธ ะธะปะธ ะฟัะตะดะปะพะถะตะฝะธั:

1. ะกะพะทะดะฐะนัะต issue ั ะพะฟะธัะฐะฝะธะตะผ
2. ะะปะธ ัะดะตะปะฐะนัะต pull request ั ัะตะฐะปะธะทะฐัะธะตะน
3. ะะฑััะดะธัะต ะฒ ะบะพะผะฐะฝะดะต ัะฐะทัะฐะฑะพััะธะบะพะฒ

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ะฒะพะทะฝะธะบะปะธ ะฟัะพะฑะปะตะผั ั Request Collector:

1. ะัะพะฒะตัััะต, ััะพ Debug ัะตะถะธะผ ะฒะบะปััะตะฝ
2. ะฃะฑะตะดะธัะตัั, ััะพ Debug Toolbar ะฐะบัะธะฒะตะฝ
3. ะัะธััะธัะต ะบะตั: `rm -rf storage/cache/*`
4. ะัะพะฒะตัััะต ะปะพะณะธ: `storage/logs/app.log`

## ๐ ะะฐะบะปััะตะฝะธะต

Request Collector - ััะพ ะผะพัะฝัะน ะธะฝััััะผะตะฝั ะดะปั ะพัะปะฐะดะบะธ HTTP-ะทะฐะฟัะพัะพะฒ, ะบะพัะพััะน:

โ ะญะบะพะฝะพะผะธั ะฒัะตะผั ัะฐะทัะฐะฑะพััะธะบะฐ
โ ะฃะฟัะพัะฐะตั ะพัะปะฐะดะบั
โ ะัะตะดะพััะฐะฒะปัะตั ะฟะพะปะฝัั ะธะฝัะพัะผะฐัะธั ะพ ะทะฐะฟัะพัะต
โ ะะผะตะตั ะบัะฐัะธะฒัะน ะธ ะฟะพะฝััะฝัะน ะธะฝัะตััะตะนั
โ ะะตะทะพะฟะฐัะตะฝ (ัะบััะฒะฐะตั ััะฒััะฒะธัะตะปัะฝัะต ะดะฐะฝะฝัะต)
โ ะัะพะธะทะฒะพะดะธัะตะปะตะฝ (ะผะธะฝะธะผะฐะปัะฝัะน overhead)

**ะัะธััะฝะพะน ัะฐะทัะฐะฑะพัะบะธ! ๐**

