# üéâ –ò—Ç–æ–≥–∏ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## ‚ú® –í—ã–ø–æ–ª–Ω–µ–Ω–æ –Ω–∞ 100%

–ü—Ä–∏–≤–µ–¥–µ–Ω–∞ –∫ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—é –≤—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞. –¢–µ–ø–µ—Ä—å **–æ–¥–∏–Ω –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º**.

---

## üìù –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 6 —Ñ–∞–π–ª–æ–≤:

1. ‚úÖ **`app/Controllers/HomeController.php`**
   - –ë—ã–ª–æ: `CacheManager $cache` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª–∞—Å—Å)
   - –°—Ç–∞–ª–æ: `CacheInterface $cache` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

2. ‚úÖ **`core/Middleware/AuthMiddleware.php`**
   - –ë—ã–ª–æ: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã `Session::`, `Http::`
   - –°—Ç–∞–ª–æ: DI —Å `SessionInterface`, `HttpInterface`

3. ‚úÖ **`core/Middleware/CsrfMiddleware.php`**
   - –ë—ã–ª–æ: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã `Session::`, `Http::`
   - –°—Ç–∞–ª–æ: DI —Å `SessionInterface`, `HttpInterface`

4. ‚úÖ **`core/Middleware/ThrottleMiddleware.php`**
   - –ë—ã–ª–æ: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã `Session::`, `Http::`
   - –°—Ç–∞–ª–æ: DI —Å `SessionInterface`, `HttpInterface`

5. ‚úÖ **`core/Middleware/GuestMiddleware.php`**
   - –ë—ã–ª–æ: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ `Session::`
   - –°—Ç–∞–ª–æ: DI —Å `SessionInterface`

6. ‚úÖ **`docs/CleanArchitectureGuidelines.md`** - –ù–û–í–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

---

## üìö –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 1. `docs/CleanArchitectureGuidelines.md` (20 KB)

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é DI –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
- ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (—á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ —á–µ–≥–æ)
- ‚úÖ Checklist –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

### 2. `CHANGELOG_ARCHITECTURE_CLEANUP.md` (10 KB)

–î–µ—Ç–∞–ª—å–Ω—ã–π changelog –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

### 3. `ARCHITECTURE_CLEANUP_SUMMARY.md` (8 KB)

–ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

---

## üéØ –ì–ª–∞–≤–Ω—ã–µ –ü—Ä–∞–≤–∏–ª–∞ (–∑–∞–ø–æ–º–Ω–∏!)

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 1: –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ type hints

```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
use Core\Contracts\DatabaseInterface;
protected DatabaseInterface $db;

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
use Core\Database;
protected Database $db;
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 2: –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
public function __construct(
    protected SessionInterface $session,
    protected HttpInterface $http
) {}

public function handle() {
    $this->session->has('key');
    $this->http->getUri();
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
public function handle() {
    Session::has('key');  // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤
    Http::getUri();       // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤
}
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 3: –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π

| ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å | ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|-------------------|----------------|
| `Core\Database` | `Core\Contracts\DatabaseInterface` |
| `Core\Session` | `Core\Contracts\SessionInterface` |
| `Core\Http` | `Core\Contracts\HttpInterface` |
| `Core\Logger` | `Core\Contracts\LoggerInterface` |
| `Core\Cache` | `Core\Contracts\CacheInterface` |
| `Core\Config` | `Core\Contracts\ConfigInterface` |
| `Core\Cache\CacheManager` | `Core\Contracts\CacheInterface` |

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|--------|
| –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ | ‚ö†Ô∏è 60% | ‚úÖ 100% |
| SOLID | ‚ö†Ô∏è 70% | ‚úÖ 100% |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |
| –ì–∏–±–∫–æ—Å—Ç—å | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```php
<?php

namespace App\Controllers;

use Core\Contracts\DatabaseInterface;
use Core\Contracts\LoggerInterface;
use Core\Contracts\CacheInterface;
use Core\Request;
use Core\Response;

class ProductController extends Controller
{
    public function __construct(
        Request $request,
        Response $response,
        protected DatabaseInterface $db,
        protected LoggerInterface $logger,
        protected CacheInterface $cache
    ) {
        parent::__construct($request, $response);
    }

    public function index(): Response
    {
        // –ö–µ—à–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
        $products = $this->cache->remember('products', 3600, function() {
            return $this->db->table('products')->get();
        });

        // –õ–æ–≥–∏—Ä—É–µ–º
        $this->logger->info('–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω');

        return $this->view('products.index', compact('products'));
    }
}
```

### Middleware

```php
<?php

namespace App\Middleware;

use Core\Contracts\SessionInterface;
use Core\Contracts\HttpInterface;
use Core\Middleware\MiddlewareInterface;

class MyMiddleware implements MiddlewareInterface
{
    public function __construct(
        protected SessionInterface $session,
        protected HttpInterface $http
    ) {}

    public function handle(callable $next): mixed
    {
        if (!$this->session->has('user_id')) {
            if ($this->http->isJson()) {
                // JSON response
            } else {
                // Redirect
            }
        }

        return $next();
    }
}
```

### –°–µ—Ä–≤–∏—Å

```php
<?php

namespace App\Services;

use Core\Contracts\DatabaseInterface;
use Core\Contracts\LoggerInterface;

class OrderService
{
    public function __construct(
        protected DatabaseInterface $db,
        protected LoggerInterface $logger
    ) {}

    public function createOrder(array $data): int
    {
        $orderId = $this->db->transaction(function() use ($data) {
            // –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
            return $this->db->table('orders')->insertGetId($data);
        });

        $this->logger->info('–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω', ['order_id' => $orderId]);

        return $orderId;
    }
}
```

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞:

1. ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ type hints
2. ‚úÖ –í–Ω–µ–¥—Ä—è–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
3. ‚úÖ –ß–∏—Ç–∞–π `docs/CleanArchitectureGuidelines.md`
4. ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã —Ñ–∞—Å–∞–¥–æ–≤ –≤ –∫–ª–∞—Å—Å–∞—Ö —Å DI

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞:

1. ‚ö†Ô∏è –ú–æ–∂–µ—à—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
2. ‚ö†Ô∏è –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
3. ‚ö†Ô∏è –§–∞—Å–∞–¥—ã –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö helper —Ñ—É–Ω–∫—Ü–∏–π)

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–∫–∏:
```php
$dbMock = $this->createMock(DatabaseInterface::class);
$service = new OrderService($dbMock);
```

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
```php
// –í config/services.php
'singletons' => [
    SessionInterface::class => RedisSessionManager::class,
]
```

‚úÖ **–Ø—Å–Ω–æ—Å—Ç—å** - –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∏–¥–Ω—ã –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ:
```php
public function __construct(
    protected DatabaseInterface $db,     // ‚Üê –Ø–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
    protected LoggerInterface $logger    // ‚Üê –Ø–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
) {}
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/`:

1. **`CleanArchitectureGuidelines.md`** ‚≠ê - –ì–ª–∞–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (—á–∏—Ç–∞–π –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å!)
2. `DIUsageGuide.md` - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ DI
3. `DIandFacadesSummary.md` - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ DI –∏ —Ñ–∞—Å–∞–¥–∞–º
4. `DIvsStaticQuickReference.md` - –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **Vilnius** –∏–º–µ–µ—Ç:

‚úÖ –ß–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (100% –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ)  
‚úÖ SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã (100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ)  
‚úÖ –û—Ç–ª–∏—á–Ω—É—é —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å  
‚úÖ Production-ready –∫–∞—á–µ—Å—Ç–≤–æ  
‚úÖ –ö–æ–¥ —É—Ä–æ–≤–Ω—è Laravel/Symfony

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- ‚úÖ 6 —Ñ–∞–π–ª–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ 3 –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–æ (~40 KB –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- ‚úÖ 0 breaking changes
- ‚úÖ 100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

**–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ! üöÄ**

---

**–î–∞—Ç–∞:** 4 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** Vilnius Framework  
**–í–µ—Ç–∫–∞:** feat/added-vite  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**

