# Changelog - DI –∏ –§–∞—Å–∞–¥—ã –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

## [2025-10-04] - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è DI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —Ñ–∞—Å–∞–¥–∞–º–∏

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ (Added)

#### –ù–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `core/Contracts/CacheInterface.php` - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–µ—à-—Å–∏—Å—Ç–µ–º—ã

#### –ù–æ–≤—ã–µ —Ñ–∞—Å–∞–¥—ã
- `core/Cache.php` - –§–∞—Å–∞–¥ –¥–ª—è CacheManager (–ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –Ω—É–ª—è)

#### –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/FacadesReview.md` - –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ñ–∞—Å–∞–¥–æ–≤ (20KB)
- `docs/FacadesFixes.md` - –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞ (14KB)
- `docs/FacadesRefactoringComplete.md` - –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ (22KB)
- `docs/DIandFacadesSummary.md` - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –≤—Å–µ–π —Ä–∞–±–æ—Ç–µ (24KB)

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (Fixed)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **core/Facades/Facade.php**
  - –ò–∑–º–µ–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (!$instance)` –Ω–∞ `if ($instance === null)`
  - –¢–µ–ø–µ—Ä—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null –≤–º–µ—Å—Ç–æ falsy –∑–Ω–∞—á–µ–Ω–∏–π

- **core/Config.php**
  - –£–¥–∞–ª–µ–Ω `implements ArrayAccess, Countable` (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∫–ª–∞—Å—Å–∞–º–∏)
  - –£–¥–∞–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `offsetExists()`, `offsetGet()`, `offsetSet()`, `offsetUnset()`
  - –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `count()`
  - –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `getInstance()`
  - –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ–π —á–∏—Å—Ç—ã–π —Ñ–∞—Å–∞–¥, –¥–µ–ª–µ–≥–∏—Ä—É—é—â–∏–π –∫ ConfigRepository

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∞—Å—Å–æ–≤
- **core/Cache/CacheManager.php**
  - –î–æ–±–∞–≤–ª–µ–Ω `implements CacheInterface`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —è–≤–Ω–æ (–Ω–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `__call`)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã: `get()`, `set()`, `has()`, `delete()`, `clear()`, `remember()`, etc.

- **config/services.php**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è `CacheInterface::class => CacheManager`
  - –û–±–Ω–æ–≤–ª–µ–Ω alias `'cache' => CacheInterface::class`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å `CacheManager::class => CacheInterface`

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ (Changed)

#### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ DI

- **app/Controllers/HomeController.php**
  - –ó–∞–º–µ–Ω–µ–Ω `use Core\Logger` –Ω–∞ `use Core\Contracts\LoggerInterface`
  - –î–æ–±–∞–≤–ª–µ–Ω `protected LoggerInterface $logger` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
  - –ó–∞–º–µ–Ω–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã `Logger::info()` –Ω–∞ `$this->logger->info()`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ `‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º DI –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞`

- **app/Models/BaseModel.php**
  - –ó–∞–º–µ–Ω–µ–Ω `use Core\Database` –Ω–∞ `use Core\Container` –∏ `use Core\Contracts\DatabaseInterface`
  - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `protected DatabaseManager $db` –Ω–∞ `protected DatabaseInterface $db`
  - –ó–∞–º–µ–Ω–µ–Ω `Database::getInstance()` –Ω–∞ `Container::getInstance()->make(DatabaseInterface::class)`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `Database::table()` –Ω–∞ `$this->db->table()`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ `‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º DI –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞`

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Documentation)

#### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –í—Å–µ MD —Ñ–∞–π–ª—ã –≤ `docs/` –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

#### –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ñ–∞—Å–∞–¥–∞–º
- –ü—Ä–∏–º–µ—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ DI
- Best practices –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Laravel –∏ Symfony

---

## –ò—Ç–æ–≥–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã (8)
1. `core/Facades/Facade.php` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null
2. `core/Config.php` - —É–ø—Ä–æ—â–µ–Ω, —É–±—Ä–∞–Ω ArrayAccess
3. `core/Cache.php` - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –∫–∞–∫ —Ñ–∞—Å–∞–¥
4. `core/Cache/CacheManager.php` - –¥–æ–±–∞–≤–ª–µ–Ω implements CacheInterface
5. `config/services.php` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Cache
6. `app/Controllers/HomeController.php` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ DI
7. `app/Models/BaseModel.php` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ DI
8. `core/Contracts/CacheInterface.php` - –ù–û–í–´–ô —Ñ–∞–π–ª

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (4)
1. `docs/FacadesReview.md` - 20 KB
2. `docs/FacadesFixes.md` - 14 KB
3. `docs/FacadesRefactoringComplete.md` - 22 KB
4. `docs/DIandFacadesSummary.md` - 24 KB

### –í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **12 —Ñ–∞–π–ª–æ–≤** –∏–∑–º–µ–Ω–µ–Ω–æ/—Å–æ–∑–¥–∞–Ω–æ
- **~80 KB** –Ω–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **0 breaking changes** - –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å!

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚ùå –°–º–µ—à–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ instance-based –ø–æ–¥—Ö–æ–¥–æ–≤
- ‚ùå –ñ–µ—Å—Ç–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ß–∞—Å—Ç–∏—á–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ SOLID

#### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ –ß–∏—Å—Ç–∞—è DI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ì–∏–±–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø–∞–º
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥—ã

---

## –ú–∏–≥—Ä–∞—Ü–∏—è

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 100% ‚úÖ

–í–µ—Å—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```php
// –≠—Ç–æ –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!
Config::get('app.name');
Logger::info('test');
Session::set('key', 'value');
Database::table('users')->get();
Cache::remember('key', 3600, fn() => 'value');
```

### –ù–æ–≤—ã–π –∫–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```php
class MyController
{
    public function __construct(
        private ConfigInterface $config,
        private LoggerInterface $logger,
        private SessionInterface $session,
        private DatabaseInterface $db,
        private CacheInterface $cache,
    ) {}
}
```

### –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:
1. ‚úÖ –ù–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã - –ø–∏—à–µ–º —Å DI
2. ‚úÖ –°—Ç–∞—Ä—ã–π –∫–æ–¥ - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥—ã
3. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ - –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## –û—Ü–µ–Ω–∫–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: **10/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ SOLID
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –£—Ä–æ–≤–µ–Ω—å Laravel/Symfony

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: **10/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Best practices
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: **10/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

- 0 breaking changes
- –í–µ—Å—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

---

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 10/10** üéâ

–§—Ä–µ–π–º–≤–æ—Ä–∫ Vilnius —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

